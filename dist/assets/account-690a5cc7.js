import{ao as ae,ap as re,j as e,N as O,O as p,Q as ve,a as i,ca as Se,cO as _e,cP as ye,cQ as Ce,cR as Ae,cS as Ne,cT as ke,cU as Ee,cV as Re,c as Fe,R as c,E as K,cW as Be,cX as Ie,k as Ue,V as Oe,$,cY as qe,cZ as We,c_ as De,S as k,A as E,c$ as Le,G as t,L as H,d as G,o as Me,F as R,B as m,aa as Ve,P as F,v as ze,h as j,I as b,d0 as J,d1 as Te,aZ as Ke,ac as Q,a4 as Z,by as $e,bz as He}from"./index-cc58a329.js";import{C as Ge}from"./Container-c6f384ce.js";import{d as X,a as Y}from"./Edit-e271c5d8.js";import{F as u,I as x,O as w,a as h}from"./OutlinedInput-400299d2.js";import{B as ee}from"./ButtonGroup-dda123ca.js";import{B as Je}from"./Breadcrumbs-27f8f572.js";import{A as Qe}from"./Autocomplete-d4d8b663.js";import{S as Ze,T as Xe}from"./TextField-727dca04.js";import{I as B}from"./InputAdornment-cc5e3223.js";import{S as Ye}from"./statistic-offers-bf8cda04.js";import{V as I,a as U}from"./VisibilityOff-4c19f2bc.js";import"./Close-751101d2.js";import"./Chip-202c59ef.js";import"./debounce-091980e9.js";import"./index-25ecd8e6.js";import"./index-a79bf066.js";var W={},es=re;Object.defineProperty(W,"__esModule",{value:!0});var oe=W.default=void 0,ss=es(ae()),se=e,as=(0,ss.default)([(0,se.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,se.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt");oe=W.default=as;var D={},rs=re;Object.defineProperty(D,"__esModule",{value:!0});var q=D.default=void 0,os=rs(ae()),ts=e,ns=(0,os.default)((0,ts.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");q=D.default=ns;const ls={email:"",langKey:"",firstName:"",lastName:"",phone:"",address:null,linkProfileFacebook:""},is=O({email:p().required("Email is required"),langKey:p().required("login is required"),firstName:p().required("firstName is required"),lastName:p().required("lastName is required"),phone:p().required("Phone is required"),address:O().nullable().notRequired(),linkProfileFacebook:p().nullable().notRequired()}),cs={currentPassword:"",newPassword:"",confirmNewPassword:""},ds=O({currentPassword:p().required("currentPassword is required"),newPassword:p().required("Password is required").min(5,"Min 5 digits").max(200,"Max 200 digits"),confirmNewPassword:p().required("Password is required").oneOf([ve("newPassword"),null],"Passwords must match").min(5,"Muin 5 digits").max(200,"Max 5 digits")}),us=ls,hs=cs;function ks(){var T;const a=i(Se),te=i(_e),ne=i(ye)??!1,L=i(Ce)??!1,le=i(Ae)??!1,M=i(Ne)??!1,ie=i(ke)??{},V=i(Ee)??!1,ce=i(Re)??{},de=i(Fe).entities??[],[ue,z]=c.useState(K(a.id,a.imageUrl,a.sourceConnectedDevice)),[f,v]=c.useState(!1),[S,he]=c.useState(null),[g,_]=c.useState(!1),[y,me]=c.useState({showPassword:!1}),[C,xe]=c.useState({showPassword:!1}),[A,pe]=c.useState({showPassword:!1}),fe=i(Be)??!1,d=i(Ie)??!1,{t:o}=Ue(),P=Oe(),s=$({initialValues:us,validationSchema:is,onSubmit:r=>{const l={...a,...r};P(qe({...l}))}}),n=$({initialValues:hs,validationSchema:ds,onSubmit:r=>{P(We({...r}))}}),we=()=>{me({showPassword:!y.showPassword})},je=()=>{xe({showPassword:!C.showPassword})},ge=()=>{pe({showPassword:!A.showPassword})},N=r=>{r.preventDefault()};c.useEffect(()=>{M&&(_(!1),n.resetForm())},[M]),c.useEffect(()=>{a&&(z(K(a.id,a.imageUrl,a.sourceConnectedDevice)),s.setValues({email:a.email?a.email:"",langKey:a.langKey?a.langKey:"",firstName:a.firstName?a.firstName:"",lastName:a.lastName?a.lastName:"",phone:a.phone?a.phone:"",address:a.address?a.address:null,linkProfileFacebook:a.linkProfileFacebook?a.linkProfileFacebook:""}),P(De({userId:Number(a.id)})))},[a]),c.useEffect(()=>{if(L){v(!1);const l={...JSON.parse(k.local.get(E.VALUE_CURRENT_USER)),...ie};k.local.set(E.VALUE_CURRENT_USER,JSON.stringify(l))}},[L]),c.useEffect(()=>{if(S){const r=new FormData;r.append("avatar",S),P(Le({formData:r}))}},[S]),c.useEffect(()=>{V&&k.local.set(E.VALUE_CURRENT_USER,JSON.stringify(ce))},[V]);const be=r=>{$e(r.target.files[0]).then(l=>{He(l,r.target.files[0].name).then(Pe=>{he(Pe)}),z(l)})};return e.jsxs(Ge,{maxWidth:"xl",className:"pt-5",children:[e.jsx(t,{container:!0,style:{paddingTop:10},children:e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsxs(Je,{"aria-label":"breadcrumb",children:[e.jsx(H,{color:"inherit",to:G.HOME,children:"SRF"}),e.jsx(H,{color:"inherit",to:G.SEARCH,children:o("account.title")}),e.jsx(Me,{color:"text.primary",children:R(a)})]})})}),te?e.jsx(m,{sx:{textAlign:"center"},children:e.jsx(Ve,{color:"inherit"})}):e.jsxs(t,{container:!0,spacing:4,style:{paddingTop:50},children:[e.jsxs(t,{item:!0,xs:12,sm:3,sx:{textAlign:"center"},children:[e.jsxs(F,{elevation:3,sx:{p:1},children:[e.jsxs(m,{sx:{position:"relative"},children:[e.jsxs(m,{sx:{position:"relative",width:"80px",marginLeft:"auto",marginRight:"auto"},children:[e.jsx(ze,{alt:"Remy Sharp",src:ue,sx:{width:80,height:80,marginLeft:"auto",marginRight:"auto",marginBottom:2,mt:2,border:"1px solid #cdc5c5"},children:(T=R(a))==null?void 0:T.charAt(0)}),a.sourceConnectedDevice==j.MOBILE_BROWSER||a.sourceConnectedDevice===j.WEB_BROWSER?e.jsx(m,{sx:{position:"absolute",bottom:0,right:0},children:e.jsx(oe,{})}):null]}),a.sourceConnectedDevice===j.MOBILE_BROWSER||a.sourceConnectedDevice===j.WEB_BROWSER?e.jsx(m,{children:e.jsx("input",{type:"file",onChange:be,style:{position:"absolute",top:0,bottom:0,left:0,right:0,opacity:0},accept:".jpg, .jpeg, .png"})}):null]}),e.jsx("h3",{children:R(a)}),e.jsx("p",{children:a.email})]}),!fe&&(d!=null&&d.countFindOffers||d!=null&&d.countRentOffers||d!=null&&d.countSellOffers)?e.jsx(m,{children:e.jsx(Ye,{countOffersByUser:d,t:o})}):null]}),e.jsxs(t,{item:!0,xs:12,sm:8,children:[e.jsx(F,{elevation:3,sx:{p:2},children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsxs(m,{sx:{mt:2},children:[e.jsxs("h5",{className:"mb-4",children:[o("account.label_personnel_details"),f?null:e.jsx(b,{"aria-label":"upload picture",className:"float-right",component:"span",color:"success",onClick:()=>v(!0),children:e.jsx(X,{})})]}),e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.email&&!!s.errors.email,size:"small",children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_email")}),e.jsx(w,{id:"email",name:"email",label:o("account.label_email"),value:s.values.email,onChange:s.handleChange,disabled:!0}),e.jsx(h,{id:"component-helper-text",children:s.touched.email&&s.errors.email})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.langKey&&!!s.errors.langKey,size:"small",children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_languages")}),e.jsx(Ze,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:o("account.label_languages"),value:s.values.langKey,onChange:r=>{s.setFieldValue("langKey",r.target.value)},disabled:!f,color:"secondary",children:Object.keys(J).length>1?Te.map(r=>e.jsx(Ke,{value:r,children:J[r].name},r)):null}),e.jsx(h,{id:"component-helper-text",children:s.touched.langKey&&s.errors.langKey})]})})]}),e.jsxs(t,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.firstName&&!!s.errors.firstName,size:"small",children:[e.jsxs(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:[o("account.label_firstname")," *"]}),e.jsx(w,{id:"firstName",name:"firstName",label:o("account.label_firstname"),value:s.values.firstName,onChange:s.handleChange,disabled:!f,color:"secondary"}),e.jsx(h,{id:"component-helper-text",children:s.touched.firstName&&s.errors.firstName})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.lastName&&!!s.errors.lastName,size:"small",children:[e.jsxs(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:[o("account.label_lastname")," *"]}),e.jsx(w,{id:"lastName",name:"lastName",label:o("account.label_lastname"),value:s.values.lastName,onChange:s.handleChange,disabled:!f,color:"secondary"}),e.jsx(h,{id:"component-helper-text",children:s.touched.lastName&&s.errors.lastName})]})})]}),e.jsxs(t,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.phone&&!!s.errors.phone,size:"small",children:[e.jsxs(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:[o("account.label_phone")," *"]}),e.jsx(w,{id:"phone",name:"phone",label:o("account.label_phone"),type:"tel",value:s.values.phone,onChange:s.handleChange,disabled:!f,color:"secondary"}),e.jsx(h,{id:"component-helper-text",children:s.touched.phone&&s.errors.phone})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.address&&!!s.errors.address,children:[e.jsx(Qe,{id:"address",fullWidth:!0,size:"small",options:de,value:s.values.address,onChange:(r,l)=>s.setFieldValue("address",l||null),autoHighlight:!0,getOptionLabel:r=>(r==null?void 0:r.city)||"",disabled:!f,renderOption:(r,l)=>e.jsx(m,{component:"li",...r,children:l==null?void 0:l.city}),renderInput:r=>e.jsx(Xe,{...r,label:"Address",color:"secondary",inputProps:{...r.inputProps,form:{autocomplete:"off"},autoComplete:"off"}})}),e.jsx(h,{id:"component-helper-text",children:s.touched.address&&s.errors.address})]})})]}),e.jsxs(t,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:s.touched.linkProfileFacebook&&!!s.errors.linkProfileFacebook,size:"small",children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_link_profile_facebook")}),e.jsx(w,{id:"linkProfileFacebook",name:"linkProfileFacebook",type:"url",label:o("account.label_link_profile_facebook"),value:s.values.linkProfileFacebook,onChange:s.handleChange,disabled:!f,color:"secondary"}),e.jsx(h,{id:"component-helper-text",children:s.touched.linkProfileFacebook&&s.errors.linkProfileFacebook})]})}),e.jsx(t,{item:!0,xs:12,md:6})]}),f?e.jsx(t,{container:!0,spacing:2,sx:{mt:2},children:e.jsx(t,{item:!0,xs:12,md:12,children:e.jsxs(ee,{variant:"contained","aria-label":"outlined primary button group",style:{float:"right"},children:[e.jsx(Q,{color:"neutral",variant:"outlined",startIcon:e.jsx(q,{}),onClick:()=>v(!1),children:o("common.label_cancel")}),e.jsx(Z,{color:"success",type:"submit",loading:ne,loadingPosition:"start",startIcon:e.jsx(Y,{}),variant:"contained",size:"small",children:o("common.label_update")})]})})}):null]})})}),a.sourceConnectedDevice===j.MOBILE_BROWSER||a.sourceConnectedDevice===j.WEB_BROWSER?e.jsx(F,{elevation:3,sx:{p:2,mt:4},children:e.jsx("form",{onSubmit:n.handleSubmit,children:e.jsxs(m,{sx:{mt:2},children:[e.jsxs("h5",{className:"mb-4",children:[o("account.label_password_details"),g?null:e.jsx(b,{"aria-label":"upload picture",className:"float-right",component:"span",color:"success",onClick:()=>_(!0),children:e.jsx(X,{})})]}),e.jsx(t,{container:!0,spacing:2,children:e.jsx(t,{item:!0,xs:12,children:e.jsxs(u,{fullWidth:!0,error:n.touched.currentPassword&&!!n.errors.currentPassword,children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_current_password")}),e.jsx(w,{id:"currentPassword",name:"currentPassword",type:y.showPassword?"text":"password",label:o("account.label_current_password"),value:n.values.currentPassword,onChange:n.handleChange,disabled:!g,color:"secondary",endAdornment:e.jsx(B,{position:"end",children:e.jsx(b,{"aria-label":"toggle password visibility",onClick:we,onMouseDown:N,edge:"end",children:y.showPassword?e.jsx(I,{}):e.jsx(U,{})})})}),e.jsx(h,{id:"component-helper-text",children:n.touched.currentPassword&&n.errors.currentPassword})]})})}),e.jsxs(t,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:n.touched.newPassword&&!!n.errors.newPassword,children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_new_password")}),e.jsx(w,{id:"newPassword",name:"newPassword",type:C.showPassword?"text":"password",label:o("account.label_new_password"),value:n.values.newPassword,onChange:n.handleChange,disabled:!g,color:"secondary",endAdornment:e.jsx(B,{position:"end",children:e.jsx(b,{"aria-label":"toggle password visibility",onClick:je,onMouseDown:N,edge:"end",children:C.showPassword?e.jsx(I,{}):e.jsx(U,{})})})}),e.jsx(h,{id:"component-helper-text",children:n.touched.newPassword&&n.errors.newPassword})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(u,{fullWidth:!0,error:n.touched.confirmNewPassword&&!!n.errors.confirmNewPassword,children:[e.jsx(x,{htmlFor:"outlined-adornment-title",color:"secondary",children:o("account.label_conf_new_password")}),e.jsx(w,{id:"confirmNewPassword",name:"confirmNewPassword",type:A.showPassword?"text":"password",label:o("account.label_conf_new_password"),value:n.values.confirmNewPassword,onChange:n.handleChange,disabled:!g,color:"secondary",endAdornment:e.jsx(B,{position:"end",children:e.jsx(b,{"aria-label":"toggle password visibility",onClick:ge,onMouseDown:N,edge:"end",children:A.showPassword?e.jsx(I,{}):e.jsx(U,{})})})}),e.jsx(h,{id:"component-helper-text",children:n.touched.confirmNewPassword&&n.errors.confirmNewPassword})]})})]}),g?e.jsx(t,{container:!0,spacing:2,sx:{mt:2},children:e.jsx(t,{item:!0,xs:12,md:12,children:e.jsxs(ee,{variant:"contained","aria-label":"outlined primary button group",style:{float:"right"},children:[e.jsx(Q,{color:"neutral",variant:"outlined",startIcon:e.jsx(q,{}),onClick:()=>_(!1),children:o("common.label_cancel")}),e.jsx(Z,{color:"success",type:"submit",loading:le,loadingPosition:"start",startIcon:e.jsx(Y,{}),variant:"contained",size:"small",children:o("account.label_update_password")})]})})}):null]})})}):null]})]})]})}export{ks as default};
