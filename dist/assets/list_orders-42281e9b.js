import{R as j,k as V,j as e,G as a,L as ge,d as k,o,B as f,a as v,e0 as me,e1 as pe,e2 as ve,e3 as Oe,V as ie,e4 as be,A as p,e5 as ye,e6 as Ae,e7 as Ee,e8 as Te,e9 as Le,n as b,u as oe,J as G,v as Y,E as Z,F as U,I as q,m as ae,aK as de,ea as Ie,eb as ee,ec as De,ed as se}from"./index-cc58a329.js";import{B as Ce}from"./Breadcrumbs-27f8f572.js";import{C as Pe}from"./Container-c6f384ce.js";import{A as te}from"./Alert-a2f3ba94.js";import{C as H,a as z}from"./CardContent-0d1848fb.js";import{C as Q,b as xe}from"./index-b8b6ccd5.js";import{S as B}from"./Skeleton-861e561d.js";import{C as w}from"./react-time-ago-5fee5104.js";import{I as he}from"./InfiniteScroll-321153e4.js";import{T as _e,a as le}from"./Tabs-844537c3.js";import{A as fe,a as ue,b as ce}from"./AccordionSummary-fab5f935.js";import{C as $}from"./CardHeader-ccefbe75.js";import"./Close-751101d2.js";import"./index-a79bf066.js";var J=(r=>(r.PASSED="Passed",r.RECEIVED="Received",r.FAILURE="Failure",r))(J||{});function ne(r){const{children:n,value:d,index:i,...u}=r;return e.jsx("div",{role:"tabpanel",hidden:d!==i,id:`simple-tabpanel-${i}`,"aria-labelledby":`simple-tab-${i}`,...u,children:d===i&&e.jsx(f,{sx:{pt:3},children:e.jsx(f,{children:n})})})}function re(r){return{id:`simple-tab-${r}`,"aria-controls":`simple-tabpanel-${r}`}}function je(){return e.jsx(a,{item:!0,xs:12,md:6,children:[0,1,2].map(r=>e.jsxs(H,{sx:{display:{xs:"block",sm:"flex"},my:2},children:[e.jsx(Q,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:e.jsx(f,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:e.jsx("img",{src:b(p.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),e.jsx(z,{sx:{flex:1},children:e.jsx(a,{container:!0,spacing:2,children:e.jsxs(a,{item:!0,xs:12,children:[e.jsx(B,{animation:"wave",height:24}),e.jsx(B,{animation:"wave",height:24}),e.jsx(B,{variant:"rectangular",width:"100%",height:100,sx:{my:3}})]})})})]},r))})}function Re({t:r,item:n}){const d=oe(),i=(s,h)=>{s.stopPropagation(),setTimeout(()=>{d(k.PROFILE+"/"+h)},300)},u=s=>{setTimeout(()=>{d(k.DETAILS_OFFER+"/"+s)},300)};return e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsx(H,{sx:{display:{xs:"block",sm:"flex"}},children:e.jsx(z,{sx:{flex:1},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{item:!0,xs:8,children:[e.jsx(o,{component:"h4",variant:"h4",sx:{fontSize:"1.2rem"},children:e.jsx(w,{convertDate:n==null?void 0:n.passedDate})}),e.jsx(o,{component:"h5",variant:"h5",display:"flex",children:n.paymentMode}),e.jsxs(o,{variant:"subtitle2",color:"text.secondary",display:"flex",children:["Nombres des produits: ",n.numberOfProducts]}),e.jsxs(o,{variant:"subtitle2",display:"flex",children:["Total du commande = ",n.totalCarts.toLocaleString("tn-TN")," TND"]})]}),e.jsx(a,{item:!0,xs:4,children:e.jsx(o,{variant:"subtitle1",color:"secondary",display:"flex",sx:{justifyContent:"end"},children:n.status===J.PASSED?r("order.label_passed"):n.status})})]})})}),e.jsxs(fe,{sx:{mt:"0 !important"},children:[e.jsx(ue,{expandIcon:e.jsx(G,{}),"aria-controls":"panel1a-content",id:"panel1a-header",className:"bg-brown",children:e.jsx(o,{children:"List des produits"})}),e.jsx(ce,{sx:{p:0},children:n.carts.map((s,h)=>{var t,g,m,l,x,y,A,E,T,L,I,D,C,P,_,R,S,F;return e.jsxs(f,{children:[e.jsxs(f,{children:[e.jsx($,{avatar:e.jsx(Y,{role:"img","aria-label":"Image avatar",src:Z((g=(t=s==null?void 0:s.sellOffer)==null?void 0:t.user)==null?void 0:g.id,(l=(m=s==null?void 0:s.sellOffer)==null?void 0:m.user)==null?void 0:l.imageUrl,(y=(x=s==null?void 0:s.sellOffer)==null?void 0:x.user)==null?void 0:y.sourceConnectedDevice),alt:"image not found",onClick:c=>{var N,M;return i(c,(M=(N=s==null?void 0:s.sellOffer)==null?void 0:N.user)==null?void 0:M.id)},children:(E=U((A=s==null?void 0:s.sellOffer)==null?void 0:A.user))==null?void 0:E.charAt(0)}),action:e.jsx(q,{"aria-label":"settings",children:e.jsx(G,{})}),title:U((T=s==null?void 0:s.sellOffer)==null?void 0:T.user),subheader:e.jsx(j.Fragment,{children:e.jsx(o,{children:e.jsx(w,{convertDate:(L=s==null?void 0:s.sellOffer)==null?void 0:L.dateCreated})})})}),e.jsxs(f,{sx:{display:{xs:"block",sm:"flex"}},onClick:()=>{var c;return u((c=s==null?void 0:s.sellOffer)==null?void 0:c.id)},children:[(D=(I=s==null?void 0:s.sellOffer)==null?void 0:I.offerImages)!=null&&D.length?e.jsx(Q,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:e.jsx(xe.LazyLoadImage,{alt:"Image offer",src:ae((C=s==null?void 0:s.sellOffer)==null?void 0:C.id,(P=s==null?void 0:s.sellOffer)==null?void 0:P.offerImages[0].path),placeholder:e.jsx("img",{src:b(p.DEFAULT_LAZY_IMAGE_LOADING),className:"img-lazy-loading",alt:"image srfgroup"}),placeholderSrc:b(p.DEFAULT_LAZY_IMAGE_LOADING),onError:c=>{c.target.onerror=null,c.target.src=b(p.DEFAULT_LAZY_IMAGE)},className:"img-lazy-loading"})}):null,e.jsxs(z,{children:[e.jsx(o,{variant:"h6",children:(_=s==null?void 0:s.sellOffer)==null?void 0:_.title}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Montant ",(S=(R=s==null?void 0:s.sellOffer)==null?void 0:R.amount)==null?void 0:S.toLocaleString("tn-TN")," TND"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Quantité ",s==null?void 0:s.quantity]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Frais de livraison ",(F=s==null?void 0:s.sellOffer)==null?void 0:F.shippingCost," TND"]}),e.jsxs(o,{variant:"h5",color:"text.secondary",children:["Total ",s==null?void 0:s.total," TND"]})]})]})]}),e.jsx(de,{})]},h)})})]})]})}function Se({t:r,item:n}){var s,h,t,g,m;const d=oe(),i=(l,x)=>{l.stopPropagation(),setTimeout(()=>{d(k.PROFILE+"/"+x)},300)},u=l=>{setTimeout(()=>{d(k.DETAILS_OFFER+"/"+l)},300)};return e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(H,{children:[e.jsx($,{avatar:e.jsx(Y,{role:"img","aria-label":"Image avatar",src:Z((s=n==null?void 0:n.user)==null?void 0:s.id,(h=n==null?void 0:n.user)==null?void 0:h.imageUrl,(t=n==null?void 0:n.user)==null?void 0:t.sourceConnectedDevice),alt:"image not found",onClick:l=>{var x;return i(l,(x=n==null?void 0:n.user)==null?void 0:x.id)},children:(g=U(n==null?void 0:n.user))==null?void 0:g.charAt(0)}),action:e.jsx(q,{"aria-label":"settings",children:e.jsx(G,{})}),title:U(n==null?void 0:n.user),subheader:(m=n==null?void 0:n.user)==null?void 0:m.email}),e.jsx(z,{className:"card-content",children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsxs(a,{item:!0,xs:8,children:[e.jsx(o,{component:"h4",variant:"h4",sx:{fontSize:"1.2rem"},children:e.jsx(w,{convertDate:n==null?void 0:n.passedDate})}),e.jsx(o,{component:"h5",variant:"h5",display:"flex",children:n.paymentMode})]}),e.jsx(a,{item:!0,xs:4,children:e.jsx(o,{variant:"subtitle1",color:"secondary",display:"flex",sx:{justifyContent:"end"},children:n.status===J.PASSED?r("order.label_passed"):n.status})})]})})]}),e.jsxs(fe,{sx:{mt:"0 !important"},children:[e.jsx(ue,{expandIcon:e.jsx(G,{}),"aria-controls":"panel1a-content",id:"panel1a-header",className:"bg-brown",children:e.jsx(o,{children:"List des produits"})}),e.jsx(ce,{sx:{p:0},children:n.carts.map((l,x)=>{var y,A,E,T,L,I,D,C,P,_,R,S,F,c,N,M,K;return e.jsxs(f,{children:[e.jsxs(f,{children:[e.jsx($,{avatar:e.jsx(Y,{role:"img","aria-label":"Image avatar",src:Z((A=(y=l==null?void 0:l.sellOffer)==null?void 0:y.user)==null?void 0:A.id,(T=(E=l==null?void 0:l.sellOffer)==null?void 0:E.user)==null?void 0:T.imageUrl,(I=(L=l==null?void 0:l.sellOffer)==null?void 0:L.user)==null?void 0:I.sourceConnectedDevice),alt:"image not found",onClick:O=>{var W,X;return i(O,(X=(W=l==null?void 0:l.sellOffer)==null?void 0:W.user)==null?void 0:X.id)},children:(C=U((D=l==null?void 0:l.sellOffer)==null?void 0:D.user))==null?void 0:C.charAt(0)}),action:e.jsx(q,{"aria-label":"settings",children:e.jsx(G,{})}),title:(P=l==null?void 0:l.sellOffer)==null?void 0:P.title,subheader:e.jsx(j.Fragment,{children:e.jsx(o,{children:e.jsx(w,{convertDate:(_=l==null?void 0:l.sellOffer)==null?void 0:_.dateCreated})})})}),e.jsxs(f,{sx:{display:{xs:"block",sm:"flex"}},onClick:()=>{var O;return u((O=l==null?void 0:l.sellOffer)==null?void 0:O.id)},children:[(S=(R=l==null?void 0:l.sellOffer)==null?void 0:R.offerImages)!=null&&S.length?e.jsx(Q,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:e.jsx(xe.LazyLoadImage,{alt:"Image offer",src:ae((F=l==null?void 0:l.sellOffer)==null?void 0:F.id,(c=l==null?void 0:l.sellOffer)==null?void 0:c.offerImages[0].path),placeholder:e.jsx("img",{src:b(p.DEFAULT_LAZY_IMAGE_LOADING),className:"img-lazy-loading",alt:"image srfgroup"}),placeholderSrc:b(p.DEFAULT_LAZY_IMAGE_LOADING),onError:O=>{O.target.onerror=null,O.target.src=b(p.DEFAULT_LAZY_IMAGE)},className:"img-lazy-loading"})}):null,e.jsxs(z,{children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Montant ",(M=(N=l==null?void 0:l.sellOffer)==null?void 0:N.amount)==null?void 0:M.toLocaleString("tn-TN")," TND"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Quantité ",l==null?void 0:l.quantity]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Frais de livraison ",(K=l==null?void 0:l.sellOffer)==null?void 0:K.shippingCost," TND"]}),e.jsxs(o,{variant:"h5",color:"text.secondary",children:["Total ",l==null?void 0:l.total," TND"]})]})]})]}),e.jsx(de,{})]},x)})})]})]})}function Je(){const[r,n]=j.useState(0);j.useState(!0);const{t:d}=V(),i=(u,s)=>{n(s)};return e.jsxs(Pe,{maxWidth:"xl",children:[e.jsx(a,{container:!0,style:{paddingTop:10},children:e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(Ce,{"aria-label":"breadcrumb",children:[e.jsx(ge,{color:"inherit",to:k.HOME,children:"SRF"}),e.jsx(o,{color:"text.primary",children:d("order.title_order")})]})})}),e.jsxs(f,{sx:{mt:5},children:[e.jsx(f,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(_e,{value:r,onChange:i,"aria-label":"basic tabs example",textColor:"secondary",indicatorColor:"secondary",children:[e.jsx(le,{label:"Commande reçu",...re(0)}),e.jsx(le,{label:"Commande passée",...re(1)})]})}),e.jsx(ne,{value:r,index:0,children:e.jsx(Fe,{})}),e.jsx(ne,{value:r,index:1,children:e.jsx(Ne,{})})]})]})}function Fe(){const[r,n]=j.useState(!0),d=v(me)??!1,i=v(pe)??[],u=v(ve)??0,s=v(Oe)??-1,{t:h}=V(),t=ie(),g=()=>{t(Ie({})),t(ee(0))};j.useEffect(()=>{r&&i.length===0&&(n(!1),g())},[r]),j.useEffect(()=>{s>=0&&!r&&t(be({page:s,size:p.ORDERS_PER_PAGE,queryParams:""}))},[s,r]);const m=()=>{n(!1),t(ee(s+1))};return e.jsx(he,{pageStart:s,loadMore:m,hasMore:u-1>s,loader:e.jsx("div",{className:"loader"},0),threshold:0,initialLoad:!1,children:e.jsxs(a,{container:!0,spacing:4,sx:{mt:3},children:[i==null?void 0:i.map((l,x)=>e.jsx(Se,{t:h,item:l},x)),d?e.jsx(je,{}):null,!d&&(i==null?void 0:i.length)==0?e.jsx(a,{item:!0,xs:12,children:e.jsx(te,{severity:"warning",children:h("order.no_commandes_founds")})}):null]})})}function Ne(){const[r,n]=j.useState(!0),d=v(ye)??!1,i=v(Ae)??[],u=v(Ee)??0,s=v(Te)??-1,{t:h}=V(),t=ie(),g=()=>{t(De({})),t(se(0))};j.useEffect(()=>{r&&i.length===0&&(n(!1),g())},[r]),j.useEffect(()=>{s>=0&&!r&&t(Le({page:s,size:p.ORDERS_PER_PAGE,queryParams:""}))},[s,r]);const m=()=>{n(!1),t(se(s+1))};return e.jsx(he,{pageStart:s,loadMore:m,hasMore:u-1>s,loader:e.jsx("div",{className:"loader"},0),threshold:0,initialLoad:!1,children:e.jsxs(a,{container:!0,spacing:4,sx:{mt:3},children:[i==null?void 0:i.map((l,x)=>e.jsx(Re,{t:h,item:l},x)),d?e.jsx(je,{}):null,!d&&(i==null?void 0:i.length)==0?e.jsx(a,{item:!0,xs:12,children:e.jsx(te,{severity:"warning",children:h("order.no_commandes_founds")})}):null]})})}export{Je as default};
