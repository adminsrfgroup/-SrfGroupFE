import{N as lt,aX as ct,aY as Me,O as dt,c8 as ut,ee as $e,r as Q,b_ as ht,j as t,ac as q,R as C,k as ae,G as b,L as ft,d as ne,o as re,B as L,V as Ze,a as O,ef as pt,eg as xt,eh as gt,ei as vt,ej as mt,ek as Le,A as k,el as ie,em as _t,en as yt,eo as jt,ep as Rt,eq as bt,er as Dt,es as Fe,et as le,u as He,m as Qe,n as U,v as Xe,E as Ke,F as se,q as Je,s as I,aK as W,w as G,eu as oe,$ as Ct,aZ as ce,a_ as de,cd as Pt,a7 as fe,ad as pe,a8 as xe,a9 as ge,ae as et,ab as ve,ev as St,ew as Et,ex as wt,bq as Oe,ey as Tt}from"./index-cc58a329.js";import{B as At}from"./Breadcrumbs-27f8f572.js";import{C as qt}from"./Container-c6f384ce.js";import{d as kt}from"./Delete-238cbf2a.js";import{C as _e,b as tt}from"./index-b8b6ccd5.js";import{C as ye,a as je}from"./CardContent-0d1848fb.js";import{C as nt}from"./CardHeader-ccefbe75.js";import{C as rt}from"./react-time-ago-5fee5104.js";import{I as at}from"./InfiniteScroll-321153e4.js";import{A as st}from"./Alert-a2f3ba94.js";import{S as ue}from"./Skeleton-861e561d.js";import{C as Mt}from"./CardActionArea-2bc53201.js";import{F as Ie,I as Ue,O as Lt,a as Ne}from"./OutlinedInput-400299d2.js";import{S as Ft,T as ze}from"./TextField-727dca04.js";import{L as Ot,A as It,D as Be}from"./DatePicker-4b8408a1.js";import{p as Ut}from"./index-a79bf066.js";import{B as me}from"./ButtonGroup-dda123ca.js";import{T as Nt,a as We}from"./Tabs-844537c3.js";import"./Close-751101d2.js";var X=(e=>(e.STANDBY="StandBy",e.ACCEPTED="Accepted",e.REFUSED="Refused",e))(X||{});const zt={amount:"",startDate:"",endDate:"",typePeriodRent:""},Bt=lt({amount:ct().nullable().notRequired(),startDate:Me().nullable().notRequired(),endDate:Me().nullable().notRequired(),typePeriodRent:dt().nullable().notRequired()});var ot={exports:{}};/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function Z(e,s,r){this.x=e,this.y=s,this.time=r||new Date().getTime()}Z.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};Z.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};Z.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function Re(e,s,r,n){this.startPoint=e,this.control1=s,this.control2=r,this.endPoint=n}Re.prototype.length=function(){for(var e=10,s=0,r=void 0,n=void 0,a=0;a<=e;a+=1){var l=a/e,o=this._point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var h=o-r,i=c-n;s+=Math.sqrt(h*h+i*i)}r=o,n=c}return s};Re.prototype._point=function(e,s,r,n,a){return s*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*n*(1-e)*e*e+a*e*e*e};function Wt(e,s,r){var n,a,l,o=null,c=0;r||(r={});var h=function(){c=r.leading===!1?0:Date.now(),o=null,l=e.apply(n,a),o||(n=a=null)};return function(){var i=Date.now();!c&&r.leading===!1&&(c=i);var d=s-(i-c);return n=this,a=arguments,d<=0||d>s?(o&&(clearTimeout(o),o=null),c=i,l=e.apply(n,a),o||(n=a=null)):!o&&r.trailing!==!1&&(o=setTimeout(h,d)),l}}function D(e,s){var r=this,n=s||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=Wt(D.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=D.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(r._mouseButtonDown=!0,r._strokeBegin(a))},this._handleMouseMove=function(a){r._mouseButtonDown&&r._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&r._mouseButtonDown&&(r._mouseButtonDown=!1,r._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var l=a.changedTouches[0];r._strokeBegin(l)}},this._handleTouchMove=function(a){a.preventDefault();var l=a.targetTouches[0];r._strokeMoveUpdate(l)},this._handleTouchEnd=function(a){var l=a.target===r._canvas;l&&(a.preventDefault(),r._strokeEnd(a))},this.on()}D.prototype.clear=function(){var e=this._ctx,s=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,s.width,s.height),e.fillRect(0,0,s.width,s.height),this._data=[],this._reset(),this._isEmpty=!0};D.prototype.fromDataURL=function(e){var s=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=new Image,a=r.ratio||window.devicePixelRatio||1,l=r.width||this._canvas.width/a,o=r.height||this._canvas.height/a;this._reset(),n.src=e,n.onload=function(){s._ctx.drawImage(n,0,0,l,o)},this._isEmpty=!1};D.prototype.toDataURL=function(e){var s;switch(e){case"image/svg+xml":return this._toSVG();default:for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return(s=this._canvas).toDataURL.apply(s,[e].concat(n))}};D.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};D.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};D.prototype.isEmpty=function(){return this._isEmpty};D.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};D.prototype._strokeUpdate=function(e){var s=e.clientX,r=e.clientY,n=this._createPoint(s,r),a=this._data[this._data.length-1],l=a&&a[a.length-1],o=l&&n.distanceTo(l)<this.minDistance;if(!(l&&o)){var c=this._addPoint(n),h=c.curve,i=c.widths;h&&i&&this._drawCurve(h,i.start,i.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}};D.prototype._strokeEnd=function(e){var s=this.points.length>2,r=this.points[0];if(!s&&r&&this._drawDot(r),r){var n=this._data[this._data.length-1],a=n[n.length-1];r.equals(a)||n.push({x:r.x,y:r.y,time:r.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};D.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};D.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};D.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};D.prototype._createPoint=function(e,s,r){var n=this._canvas.getBoundingClientRect();return new Z(e-n.left,s-n.top,r||new Date().getTime())};D.prototype._addPoint=function(e){var s=this.points,r=void 0;if(s.push(e),s.length>2){s.length===3&&s.unshift(s[0]),r=this._calculateCurveControlPoints(s[0],s[1],s[2]);var n=r.c2;r=this._calculateCurveControlPoints(s[1],s[2],s[3]);var a=r.c1,l=new Re(s[1],n,a,s[2]),o=this._calculateCurveWidths(l);return s.shift(),{curve:l,widths:o}}return{}};D.prototype._calculateCurveControlPoints=function(e,s,r){var n=e.x-s.x,a=e.y-s.y,l=s.x-r.x,o=s.y-r.y,c={x:(e.x+s.x)/2,y:(e.y+s.y)/2},h={x:(s.x+r.x)/2,y:(s.y+r.y)/2},i=Math.sqrt(n*n+a*a),d=Math.sqrt(l*l+o*o),g=c.x-h.x,p=c.y-h.y,u=d/(i+d),j={x:h.x+g*u,y:h.y+p*u},f=s.x-j.x,R=s.y-j.y;return{c1:new Z(c.x+f,c.y+R),c2:new Z(h.x+f,h.y+R)}};D.prototype._calculateCurveWidths=function(e){var s=e.startPoint,r=e.endPoint,n={start:null,end:null},a=this.velocityFilterWeight*r.velocityFrom(s)+(1-this.velocityFilterWeight)*this._lastVelocity,l=this._strokeWidth(a);return n.start=this._lastWidth,n.end=l,this._lastVelocity=a,this._lastWidth=l,n};D.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};D.prototype._drawPoint=function(e,s,r){var n=this._ctx;n.moveTo(e,s),n.arc(e,s,r,0,2*Math.PI,!1),this._isEmpty=!1};D.prototype._drawCurve=function(e,s,r){var n=this._ctx,a=r-s,l=Math.floor(e.length());n.beginPath();for(var o=0;o<l;o+=1){var c=o/l,h=c*c,i=h*c,d=1-c,g=d*d,p=g*d,u=p*e.startPoint.x;u+=3*g*c*e.control1.x,u+=3*d*h*e.control2.x,u+=i*e.endPoint.x;var j=p*e.startPoint.y;j+=3*g*c*e.control1.y,j+=3*d*h*e.control2.y,j+=i*e.endPoint.y;var f=s+i*a;this._drawPoint(u,j,f)}n.closePath(),n.fill()};D.prototype._drawDot=function(e){var s=this._ctx,r=typeof this.dotSize=="function"?this.dotSize():this.dotSize;s.beginPath(),this._drawPoint(e.x,e.y,r),s.closePath(),s.fill()};D.prototype._fromData=function(e,s,r){for(var n=0;n<e.length;n+=1){var a=e[n];if(a.length>1)for(var l=0;l<a.length;l+=1){var o=a[l],c=new Z(o.x,o.y,o.time),h=o.color;if(l===0)this.penColor=h,this._reset(),this._addPoint(c);else if(l!==a.length-1){var i=this._addPoint(c),d=i.curve,g=i.widths;d&&g&&s(d,g,h)}}else{this._reset();var p=a[0];r(p)}}};D.prototype._toSVG=function(){var e=this,s=this._data,r=this._canvas,n=Math.max(window.devicePixelRatio||1,1),a=0,l=0,o=r.width/n,c=r.height/n,h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttributeNS(null,"width",r.width),h.setAttributeNS(null,"height",r.height),this._fromData(s,function(y,S,A){var w=document.createElement("path");if(!isNaN(y.control1.x)&&!isNaN(y.control1.y)&&!isNaN(y.control2.x)&&!isNaN(y.control2.y)){var N="M "+y.startPoint.x.toFixed(3)+","+y.startPoint.y.toFixed(3)+" "+("C "+y.control1.x.toFixed(3)+","+y.control1.y.toFixed(3)+" ")+(y.control2.x.toFixed(3)+","+y.control2.y.toFixed(3)+" ")+(y.endPoint.x.toFixed(3)+","+y.endPoint.y.toFixed(3));w.setAttribute("d",N),w.setAttribute("stroke-width",(S.end*2.25).toFixed(3)),w.setAttribute("stroke",A),w.setAttribute("fill","none"),w.setAttribute("stroke-linecap","round"),h.appendChild(w)}},function(y){var S=document.createElement("circle"),A=typeof e.dotSize=="function"?e.dotSize():e.dotSize;S.setAttribute("r",A),S.setAttribute("cx",y.x),S.setAttribute("cy",y.y),S.setAttribute("fill",y.color),h.appendChild(S)});var i="data:image/svg+xml;base64,",d='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+l+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",g=h.innerHTML;if(g===void 0){var p=document.createElement("dummy"),u=h.childNodes;p.innerHTML="";for(var j=0;j<u.length;j+=1)p.appendChild(u[j].cloneNode(!0));g=p.innerHTML}var f="</svg>",R=d+g+f;return i+btoa(R)};D.prototype.fromData=function(e){var s=this;this.clear(),this._fromData(e,function(r,n){return s._drawCurve(r,n.start,n.end)},function(r){return s._drawDot(r)}),this._data=e};D.prototype.toData=function(){return this._data};const Gt=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"})),Yt=ut(Gt);var he={exports:{}},Ge;function Vt(){return Ge||(Ge=1,function(e,s){(function(r,n){e.exports=n()})($e,function(){return function(r){function n(l){if(a[l])return a[l].exports;var o=a[l]={exports:{},id:l,loaded:!1};return r[l].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var a={};return n.m=r,n.c=a,n.p="",n(0)}([function(r,n){function a(i){var d=i.getContext("2d"),g=i.width,p=i.height,u=d.getImageData(0,0,g,p).data,j=c(!0,g,p,u),f=c(!1,g,p,u),R=h(!0,g,p,u),y=h(!1,g,p,u),S=y-R+1,A=f-j+1,w=d.getImageData(R,j,S,A);return i.width=S,i.height=A,d.clearRect(0,0,S,A),d.putImageData(w,0,0),i}function l(i,d,g,p){return{red:p[4*(g*d+i)],green:p[4*(g*d+i)+1],blue:p[4*(g*d+i)+2],alpha:p[4*(g*d+i)+3]}}function o(i,d,g,p){return l(i,d,g,p).alpha}function c(i,d,g,p){for(var u=i?1:-1,j=i?0:g-1,f=j;i?f<g:f>-1;f+=u)for(var R=0;R<d;R++)if(o(R,f,d,p))return f;return null}function h(i,d,g,p){for(var u=i?1:-1,j=i?0:d-1,f=j;i?f<d:f>-1;f+=u)for(var R=0;R<g;R++)if(o(f,R,d,p))return f;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=a}])})}(he)),he.exports}(function(e,s){(function(r,n){e.exports=n(Ut,Q,Yt,Vt())})($e,function(r,n,a,l){return function(o){function c(i){if(h[i])return h[i].exports;var d=h[i]={exports:{},id:i,loaded:!1};return o[i].call(d.exports,d,d.exports,c),d.loaded=!0,d.exports}var h={};return c.m=o,c.c=h,c.p="",c(0)}([function(o,c,h){function i(v){return v&&v.__esModule?v:{default:v}}function d(v,m){var T={};for(var P in v)m.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(v,P)&&(T[P]=v[P]);return T}function g(v,m){if(!(v instanceof m))throw new TypeError("Cannot call a class as a function")}function p(v,m){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?v:m}function u(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);v.prototype=Object.create(m&&m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(v,m):v.__proto__=m)}Object.defineProperty(c,"__esModule",{value:!0});var j=Object.assign||function(v){for(var m=1;m<arguments.length;m++){var T=arguments[m];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(v[P]=T[P])}return v},f=function(){function v(m,T){for(var P=0;P<T.length;P++){var x=T[P];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,x.key,x)}}return function(m,T,P){return T&&v(m.prototype,T),P&&v(m,P),m}}(),R=h(1),y=i(R),S=h(2),A=i(S),w=h(3),N=i(w),Y=h(4),H=i(Y),z=function(v){function m(){var T,P,x,K;g(this,m);for(var J=arguments.length,ee=Array(J),V=0;V<J;V++)ee[V]=arguments[V];return P=x=p(this,(T=m.__proto__||Object.getPrototypeOf(m)).call.apply(T,[this].concat(ee))),x._sigPad=null,x._excludeOurProps=function(){var E=x.props,F=(E.canvasProps,E.clearOnResize,d(E,["canvasProps","clearOnResize"]));return F},x.getCanvas=function(){return x._canvas},x.getTrimmedCanvas=function(){var E=document.createElement("canvas");return E.width=x._canvas.width,E.height=x._canvas.height,E.getContext("2d").drawImage(x._canvas,0,0),(0,H.default)(E)},x.getSignaturePad=function(){return x._sigPad},x._checkClearOnResize=function(){x.props.clearOnResize&&x._resizeCanvas()},x._resizeCanvas=function(){var E=x.props.canvasProps||{},F=E.width,te=E.height;if(!F||!te){var B=x._canvas,$=Math.max(window.devicePixelRatio||1,1);F||(B.width=B.offsetWidth*$),te||(B.height=B.offsetHeight*$),B.getContext("2d").scale($,$),x.clear()}},x.on=function(){return window.addEventListener("resize",x._checkClearOnResize),x._sigPad.on()},x.off=function(){return window.removeEventListener("resize",x._checkClearOnResize),x._sigPad.off()},x.clear=function(){return x._sigPad.clear()},x.isEmpty=function(){return x._sigPad.isEmpty()},x.fromDataURL=function(E,F){return x._sigPad.fromDataURL(E,F)},x.toDataURL=function(E,F){return x._sigPad.toDataURL(E,F)},x.fromData=function(E){return x._sigPad.fromData(E)},x.toData=function(){return x._sigPad.toData()},K=P,p(x,K)}return u(m,v),f(m,[{key:"componentDidMount",value:function(){this._sigPad=new N.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var T=this,P=this.props.canvasProps;return A.default.createElement("canvas",j({ref:function(x){T._canvas=x}},P))}}]),m}(S.Component);z.propTypes={velocityFilterWeight:y.default.number,minWidth:y.default.number,maxWidth:y.default.number,minDistance:y.default.number,dotSize:y.default.oneOfType([y.default.number,y.default.func]),penColor:y.default.string,throttle:y.default.number,onEnd:y.default.func,onBegin:y.default.func,canvasProps:y.default.object,clearOnResize:y.default.bool},z.defaultProps={clearOnResize:!0},c.default=z},function(o,c){o.exports=r},function(o,c){o.exports=n},function(o,c){o.exports=a},function(o,c){o.exports=l}])})})(ot);var $t=ot.exports;const Zt=ht($t);function Ht({callbackImageURL:e}){const[s,r]=Q.useState(!1),n=Q.useRef(),[a,l]=Q.useState("black"),[o,c]=Q.useState(""),h=["black","green","red"];Q.useEffect(()=>{d()},[]);const i=()=>{const p=n.current.getTrimmedCanvas().toDataURL("image/png");p&&(c(p),e(p))},d=()=>{r(!1),c(""),n.current.clear(),e("")},g=()=>{r(!0)};return t.jsxs("div",{className:"app-signature",children:[t.jsxs("div",{className:"sigPad__penColors",children:[t.jsx("p",{children:"Pen Color:"}),h.map(p=>t.jsx("span",{style:{backgroundColor:p,border:`${p===a?`2px solid ${p}`:""}`},onClick:()=>l(p)},p))]}),t.jsx("div",{className:"sigPadContainer",children:t.jsx(Zt,{penColor:a,canvasProps:{className:"sigCanvas"},ref:n,onEnd:g})}),t.jsx("div",{className:"modal__bottom",children:t.jsxs(me,{"aria-label":"outlined primary button group",sx:{mt:2},children:[t.jsx(q,{onClick:()=>d(),color:"neutral",disabled:!s,children:"Clear"}),t.jsx(q,{onClick:i,color:"success",disabled:!s,children:"Confirmer"})]})}),o&&t.jsx(t.Fragment,{children:t.jsx("img",{src:o,alt:"signature",className:"signature"})})]})}function Ye(e){const{children:s,value:r,index:n,...a}=e;return t.jsx("div",{role:"tabpanel",hidden:r!==n,id:`simple-tabpanel-${n}`,"aria-labelledby":`simple-tab-${n}`,...a,children:r===n&&t.jsx(L,{sx:{pt:3},children:t.jsx(L,{children:s})})})}function Ve(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}function jn(){const[e,s]=C.useState(0),{t:r}=ae(),n=(a,l)=>{s(l)};return t.jsxs(qt,{maxWidth:"xl",children:[t.jsx(b,{container:!0,style:{paddingTop:10},children:t.jsx(b,{item:!0,xs:12,md:6,children:t.jsxs(At,{"aria-label":"breadcrumb",children:[t.jsx(ft,{color:"inherit",to:ne.HOME,children:"SRF"}),t.jsx(re,{color:"text.primary",children:r("header.label_rent_request")})]})})}),t.jsxs(L,{sx:{mt:5},children:[t.jsx(L,{sx:{borderBottom:1,borderColor:"divider"},children:t.jsxs(Nt,{value:e,onChange:n,"aria-label":"basic tabs example",textColor:"secondary",indicatorColor:"secondary",children:[t.jsx(We,{label:"Demande reçu",...Ve(0)}),t.jsx(We,{label:"Demande envoyée",...Ve(1)})]})}),t.jsx(Ye,{value:e,index:0,children:t.jsx(Xt,{})}),t.jsx(Ye,{value:e,index:1,children:t.jsx(Qt,{})})]})]})}function Qt(){const[e,s]=C.useState(!0),[r,n]=C.useState(!1),[a,l]=C.useState({}),{t:o}=ae(),c=Ze(),h=O(pt)??!1,i=O(xt)??[],d=O(gt)??-1,g=O(vt)??-1,p=O(mt)??!1,u=()=>{c(Pt({})),c(ie(0))};C.useEffect(()=>{e&&i.length===0&&(s(!1),u())},[e]),C.useEffect(()=>{d>=0&&!e&&c(Le({page:d,size:k.RENT_REQUEST_PER_PAGE,queryParams:""}))},[d,e]);const j=()=>{s(!1),c(ie(d+1))},f=(A,w)=>{A.stopPropagation(),l(w),n(!0)},R=()=>{n(!1)},y=()=>{c(Tt({id:a.id})),n(!1)};C.useEffect(()=>{p&&(u(),c(ie(0)),c(Le({page:0,size:k.RENT_REQUEST_PER_PAGE,queryParams:""})))},[p]);const S=()=>t.jsxs(fe,{open:r,TransitionComponent:pe,keepMounted:!0,onClose:R,"aria-describedby":"alert-dialog-slide-description",children:[t.jsx(xe,{children:o("rentrequest.title_dialog_delete_rentrequest")}),t.jsx(ge,{children:t.jsx(et,{id:"alert-dialog-slide-description",children:o("rentrequest.description_dialog_delete_rentrequest")})}),t.jsxs(ve,{children:[t.jsx(q,{onClick:R,color:"neutral",children:o("common.label_back")}),t.jsx(q,{onClick:y,color:"error",children:o("common.label_cancel")})]})]});return t.jsxs(L,{children:[t.jsx(at,{pageStart:d,loadMore:j,hasMore:g-1>d,loader:t.jsx("div",{className:"loader"},0),threshold:0,initialLoad:!1,children:t.jsxs(b,{container:!0,spacing:4,sx:{mt:3},children:[i.map((A,w)=>t.jsx(Kt,{item:A,removeRentRequest:f},w)),h?t.jsx(it,{}):null]})}),!h&&(i==null?void 0:i.length)==0?t.jsx(b,{item:!0,xs:12,md:6,children:t.jsx(st,{severity:"warning",children:o("rentrequest.no_rentrequest_founds")})}):null,S()]})}function Xt(){const[e,s]=C.useState(!0),{t:r}=ae(),n=Ze(),a=O(_t)??!1,l=O(yt)??[],o=O(jt)??-1,c=O(Rt)??-1,h=O(bt)??!1,i=O(Dt)??!1,d=()=>{n(St({})),n(le(0))};C.useEffect(()=>{e&&l.length===0&&(s(!1),d())},[]),C.useEffect(()=>{o>=0&&!e&&n(Fe({page:o,size:k.RENT_REQUEST_PER_PAGE,queryParams:""}))},[o,e]);const g=()=>{s(!1),n(le(o+1))},p=j=>{n(Et({id:j.id}))},u=(j,f)=>{const R={...j,rentOffer:{...j.rentOffer,...f.rentOffer},imageSignatureReceived:f.imageSignatureReceived};n(wt(R))};return C.useEffect(()=>{(h||i)&&(d(),n(le(0)),n(Fe({page:0,size:k.RENT_REQUEST_PER_PAGE,queryParams:""})))},[h,i]),t.jsxs(L,{children:[t.jsx(at,{pageStart:o,loadMore:g,hasMore:c-1>o,loader:t.jsx("div",{className:"loader"},0),threshold:0,initialLoad:!1,children:t.jsxs(b,{container:!0,spacing:4,sx:{mt:3},children:[l.map((j,f)=>t.jsx(en,{item:j,callbackRefusedRentRequest:p,callbackAcceptRentRequest:R=>u(j,R)},f)),a?t.jsx(it,{}):null]})}),!a&&(l==null?void 0:l.length)==0?t.jsx(b,{item:!0,xs:12,md:6,children:t.jsx(st,{severity:"warning",children:r("rentrequest.no_rentrequest_founds")})}):null]})}function Kt({item:e,removeRentRequest:s}){var i,d,g,p,u,j,f,R,y,S,A,w,N,Y,H,z;const[r,n]=C.useState(-1),{t:a}=ae(),l=He(),o=v=>{setTimeout(()=>{l(ne.DETAILS_OFFER+"/"+(v==null?void 0:v.id))},300)},c=(v,m)=>{v.stopPropagation(),setTimeout(()=>{l(ne.PROFILE+"/"+m)},300)},h=(v,m)=>{v.stopPropagation(),r===m.id?n(-1):n(m.id||-1)};return t.jsx(b,{item:!0,xs:12,md:6,children:t.jsx(Mt,{component:"a",children:t.jsxs(ye,{sx:{display:{xs:"block",sm:"flex"}},onClick:()=>o(e==null?void 0:e.rentOffer),children:[t.jsx(_e,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:(d=(i=e==null?void 0:e.rentOffer)==null?void 0:i.offerImages)!=null&&d.length?t.jsx(tt.LazyLoadImage,{alt:"Image offer",src:Qe((g=e==null?void 0:e.rentOffer)==null?void 0:g.id,(p=e==null?void 0:e.rentOffer)==null?void 0:p.offerImages[0].path),placeholder:t.jsx("img",{src:U(k.DEFAULT_LAZY_IMAGE_LOADING),className:"img-lazy-loading",alt:"image srfgroup"}),placeholderSrc:U(k.DEFAULT_LAZY_IMAGE_LOADING),onError:v=>{v.target.onerror=null,v.target.src=U(k.DEFAULT_LAZY_IMAGE)},className:"img-lazy-loading"}):t.jsx(L,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:t.jsx("img",{src:U(k.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),t.jsxs(je,{sx:{flex:1},children:[t.jsxs(b,{container:!0,spacing:2,children:[t.jsxs(b,{item:!0,xs:8,children:[t.jsx(nt,{sx:{pl:0,pt:0},avatar:t.jsx(Xe,{"aria-label":"Image avatar",src:Ke((u=e==null?void 0:e.receiverUser)==null?void 0:u.id,(j=e.receiverUser)==null?void 0:j.imageUrl,(f=e.receiverUser)==null?void 0:f.sourceConnectedDevice),alt:"image not found",onClick:v=>{var m;return c(v,(m=e==null?void 0:e.receiverUser)==null?void 0:m.id)},role:"img",children:(R=se(e==null?void 0:e.receiverUser))==null?void 0:R.charAt(0)}),title:se(e==null?void 0:e.receiverUser),subheader:(y=e==null?void 0:e.rentOffer)==null?void 0:y.title}),e.status===X.STANDBY?t.jsx(q,{variant:"outlined",color:"error",onClick:v=>s(v,e),children:a("common.label_cancel")}):null]}),t.jsxs(b,{item:!0,xs:4,sx:{textAlign:"right"},children:[t.jsx(re,{variant:"caption",color:"secondary",display:"flex",sx:{justifyContent:"end"},children:a("rentrequest."+e.status)}),t.jsx(re,{variant:"caption",display:"flex",sx:{justifyContent:"end"},children:t.jsx(rt,{convertDate:e==null?void 0:e.sendDate})})]})]}),r===e.id?t.jsx(L,{children:t.jsxs(Je,{sx:{bgcolor:"background.paper"},children:[t.jsx(I,{alignItems:"flex-start",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:((S=e==null?void 0:e.rentOffer)==null?void 0:S.description)||""}})}),(A=e==null?void 0:e.rentOffer)!=null&&A.amount?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:a("common.label_amount"),secondary:t.jsxs(C.Fragment,{children:[(w=e==null?void 0:e.rentOffer)==null?void 0:w.amount," TND"]})})})]}):null,(N=e==null?void 0:e.rentOffer)!=null&&N.startDate?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:a("common.label_start_date"),secondary:t.jsx(C.Fragment,{children:oe(new Date((Y=e==null?void 0:e.rentOffer)==null?void 0:Y.startDate))})})})]}):null,(H=e==null?void 0:e.rentOffer)!=null&&H.endDate?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:a("common.label_end_date"),secondary:t.jsx(C.Fragment,{children:oe(new Date((z=e==null?void 0:e.rentOffer)==null?void 0:z.endDate))})})})]}):null,e.imageSignatureReceived?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:"Signature",secondary:t.jsx(C.Fragment,{children:t.jsx("img",{src:e.imageSignatureReceived,alt:"signature",className:"full-img-responsive"})})})})]}):null]})}):null,e.status===X.ACCEPTED?t.jsx(q,{variant:"outlined",color:"success",type:"button",onClick:v=>h(v,e),children:r===e.id?a("common.hide_details"):a("common.show_details")}):null]})]})})})}const Jt=zt;function en({item:e,callbackRefusedRentRequest:s,callbackAcceptRentRequest:r}){var K,J,ee,V,E,F,te,B,$,be,De,Ce,Pe,Se,Ee,we;const[n,a]=C.useState(!1),[l,o]=C.useState(!1),[c,h]=C.useState(-1),[i,d]=C.useState(-1),[g,p]=C.useState(""),{t:u}=ae(),j=He(),f=Ct({initialValues:Jt,validationSchema:Bt,onSubmit:_=>{const M={rentOffer:{amount:_.amount,startDate:Oe(_.startDate),endDate:Oe(_.endDate),typePeriodRent:_.typePeriodRent},imageSignatureReceived:g};r(M)}}),R=_=>{setTimeout(()=>{j(ne.DETAILS_OFFER+"/"+(_==null?void 0:_.id))},300)},y=(_,M)=>{_.stopPropagation(),setTimeout(()=>{j(ne.PROFILE+"/"+M)},300)},S=(_,M)=>{_.stopPropagation(),i===M.id?d(-1):d(M.id||-1)},A=_=>{_.stopPropagation(),h(-1)},w=(_,M)=>{var Te,Ae,qe,ke;_.stopPropagation(),h(M.id||-1),f.setFieldValue("amount",((Te=e==null?void 0:e.rentOffer)==null?void 0:Te.amount)||""),f.setFieldValue("startDate",((Ae=e==null?void 0:e.rentOffer)==null?void 0:Ae.startDate)||""),f.setFieldValue("endDate",((qe=e==null?void 0:e.rentOffer)==null?void 0:qe.endDate)||""),f.setFieldValue("typePeriodRent",((ke=e==null?void 0:e.rentOffer)==null?void 0:ke.typePeriodRent)||"")},N=(_,M)=>{_.stopPropagation(),a(!0)},Y=()=>{a(!1)},H=()=>{a(!1),s(e)},z=()=>{o(!0),p("")},v=()=>{o(!1)},m=()=>{o(!1)},T=_=>{p(_)},P=()=>t.jsxs(fe,{open:n,TransitionComponent:pe,keepMounted:!0,onClose:Y,"aria-describedby":"alert-dialog-slide-description",children:[t.jsx(xe,{children:u("rentrequest.title_dialog_cancel_rentrequest")}),t.jsx(ge,{children:t.jsx(et,{id:"alert-dialog-slide-description",children:u("rentrequest.description_dialog_cancel_rentrequest")})}),t.jsxs(ve,{children:[t.jsx(q,{onClick:Y,color:"neutral",children:u("common.label_cancel")}),t.jsx(q,{onClick:H,color:"error",children:u("rentrequest.label_btn_refused")})]})]}),x=()=>t.jsxs(fe,{open:l,TransitionComponent:pe,keepMounted:!0,fullScreen:!0,onClose:v,"aria-describedby":"alert-dialog-slide-description",PaperProps:{style:{backgroundColor:"rgb(238, 235, 235)",color:"black"}},children:[t.jsx(xe,{children:u("rentrequest.title_dialog_add_signature")}),t.jsx(ge,{children:t.jsx(Ht,{callbackImageURL:T})}),t.jsxs(ve,{style:{justifyContent:"start"},children:[t.jsx(q,{onClick:()=>o(!1),color:"neutral",children:u("common.label_cancel")}),t.jsx(q,{variant:"contained",onClick:m,color:"success",disabled:!g.length,children:u("common.label_add")})]})]});return t.jsxs(b,{item:!0,xs:12,md:6,children:[t.jsxs(ye,{sx:{display:{xs:"block",sm:"flex"}},onClick:()=>R(e==null?void 0:e.rentOffer),children:[t.jsx(_e,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:(J=(K=e==null?void 0:e.rentOffer)==null?void 0:K.offerImages)!=null&&J.length?t.jsx(tt.LazyLoadImage,{alt:"Image offer",src:Qe((ee=e==null?void 0:e.rentOffer)==null?void 0:ee.id,(V=e==null?void 0:e.rentOffer)==null?void 0:V.offerImages[0].path),placeholder:t.jsx("img",{src:U(k.DEFAULT_LAZY_IMAGE_LOADING),className:"img-lazy-loading",alt:"image srfgroup"}),placeholderSrc:U(k.DEFAULT_LAZY_IMAGE_LOADING),onError:_=>{_.target.onerror=null,_.target.src=U(k.DEFAULT_LAZY_IMAGE)},className:"img-lazy-loading"}):t.jsx(L,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:t.jsx("img",{src:U(k.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),t.jsxs(je,{sx:{flex:1},children:[t.jsxs(b,{container:!0,spacing:2,children:[t.jsxs(b,{item:!0,xs:8,children:[t.jsx(nt,{sx:{pl:0,pt:0},avatar:t.jsx(Xe,{"aria-label":"Image avatar",src:Ke((E=e==null?void 0:e.senderUser)==null?void 0:E.id,(F=e.senderUser)==null?void 0:F.imageUrl,(te=e.senderUser)==null?void 0:te.sourceConnectedDevice),alt:"image not found",onClick:_=>{var M;return y(_,(M=e==null?void 0:e.receiverUser)==null?void 0:M.id)},role:"button",children:(B=se(e==null?void 0:e.senderUser))==null?void 0:B.charAt(0)}),title:se(e==null?void 0:e.senderUser),subheader:($=e==null?void 0:e.rentOffer)==null?void 0:$.title}),e.status===X.STANDBY&&c!==e.id?t.jsxs(me,{sx:{my:1},variant:"contained","aria-label":"outlined primary button group",children:[t.jsx(q,{variant:"outlined",color:"neutral",onClick:_=>N(_),children:u("rentrequest.label_btn_refused")}),t.jsx(q,{variant:"outlined",color:"success",onClick:_=>w(_,e),children:u("rentrequest.label_btn_accept")})]}):null]}),t.jsxs(b,{item:!0,xs:4,sx:{textAlign:"right"},children:[t.jsx(re,{variant:"caption",color:"secondary",display:"flex",sx:{justifyContent:"end"},children:u("rentrequest."+e.status)}),t.jsx(re,{variant:"caption",display:"flex",sx:{justifyContent:"end"},children:t.jsx(rt,{convertDate:e==null?void 0:e.sendDate})})]})]}),t.jsxs("form",{onClick:_=>_.stopPropagation(),onSubmit:f.handleSubmit,children:[c===e.id?t.jsxs(Ot,{dateAdapter:It,children:[t.jsxs(b,{container:!0,spacing:2,sx:{my:2},children:[t.jsx(b,{item:!0,xs:12,md:6,children:t.jsxs(Ie,{fullWidth:!0,error:f.touched.amount&&!!f.errors.amount,size:"small",children:[t.jsx(Ue,{htmlFor:"outlined-adornment-amount",color:"secondary",children:"Amount"}),t.jsx(Lt,{id:"amount",type:"number",color:"secondary",value:f.values.amount,onChange:f.handleChange,label:"Amount"}),t.jsx(Ne,{id:"component-helper-text",children:f.touched.amount&&f.errors.amount})]})}),t.jsx(b,{item:!0,xs:12,md:6,children:t.jsxs(Ie,{fullWidth:!0,error:f.touched.typePeriodRent&&!!f.errors.typePeriodRent,className:"form-control-type-offer",size:"small",children:[t.jsx(Ue,{id:"demo-simple-select-label",className:"type-offer-select",color:"secondary",children:u("add_offer.per_periode")}),t.jsxs(Ft,{id:"typePeriodRent",name:"typePeriodRent",color:"secondary",label:u("add_offer.per_periode"),labelId:"demo-simple-select-label",value:f.values.typePeriodRent,onChange:f.handleChange,children:[t.jsx(ce,{value:de.PerMonth,children:u("add_offer.per_month")}),t.jsx(ce,{value:de.PerDay,children:u("add_offer.per_day")}),t.jsx(ce,{value:de.PerYear,children:u("add_offer.per_year")})]}),t.jsx(Ne,{id:"component-helper-text",children:f.touched.typePeriodRent&&f.errors.typePeriodRent})]})})]}),t.jsxs(b,{container:!0,spacing:2,children:[t.jsx(b,{item:!0,xs:12,md:6,children:t.jsx(Be,{label:u("common.label_start_date"),value:f.values.startDate,onChange:_=>f.setFieldValue("startDate",_),renderInput:_=>t.jsx(ze,{..._,size:"small",fullWidth:!0,error:!1,color:"secondary"})})}),t.jsx(b,{item:!0,xs:12,md:6,children:t.jsx(Be,{label:u("common.label_end_date"),value:f.values.endDate,onChange:_=>f.setFieldValue("endDate",_),renderInput:_=>t.jsx(ze,{..._,size:"small",fullWidth:!0,error:!1,color:"secondary"})})})]}),t.jsx(b,{container:!0,spacing:2,sx:{mt:1},children:t.jsx(b,{item:!0,xs:12,md:12,children:t.jsx(q,{variant:"outlined",color:"neutral",onClick:z,fullWidth:!0,children:u("rentrequest.label_add_signature")})})}),g?t.jsx(b,{container:!0,spacing:2,sx:{mt:1},children:t.jsxs(b,{item:!0,xs:12,children:[t.jsx(L,{sx:{textAlign:"right"},children:t.jsx(q,{variant:"outlined",color:"error",onClick:()=>p(""),children:t.jsx(kt,{})})}),t.jsx("img",{src:g,alt:"signature",className:"full-img-responsive"})]})}):null]}):null,e.status===X.STANDBY&&c===e.id?t.jsxs(me,{sx:{my:2},variant:"contained","aria-label":"outlined primary button group",children:[t.jsx(q,{variant:"outlined",color:"neutral",onClick:_=>A(_),children:u("common.label_cancel")}),t.jsx(q,{variant:"outlined",color:"success",type:"submit",children:u("common.label_confirm")})]}):null]}),i===e.id?t.jsx(L,{children:t.jsxs(Je,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:[t.jsx(I,{alignItems:"flex-start",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:((be=e==null?void 0:e.rentOffer)==null?void 0:be.description)||""}})}),(De=e==null?void 0:e.rentOffer)!=null&&De.amount?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:u("common.label_amount"),secondary:t.jsxs(C.Fragment,{children:[(Ce=e==null?void 0:e.rentOffer)==null?void 0:Ce.amount," TND"]})})})]}):null,(Pe=e==null?void 0:e.rentOffer)!=null&&Pe.startDate?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:u("common.label_start_date"),secondary:t.jsx(C.Fragment,{children:oe(new Date((Se=e==null?void 0:e.rentOffer)==null?void 0:Se.startDate))})})})]}):null,(Ee=e==null?void 0:e.rentOffer)!=null&&Ee.endDate?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:u("common.label_end_date"),secondary:t.jsx(C.Fragment,{children:oe(new Date((we=e==null?void 0:e.rentOffer)==null?void 0:we.endDate))})})})]}):null,e.imageSignatureReceived?t.jsxs(t.Fragment,{children:[t.jsx(W,{variant:"inset",component:"li"}),t.jsx(I,{alignItems:"flex-start",children:t.jsx(G,{primary:"Signature",secondary:t.jsx(C.Fragment,{children:t.jsx("img",{src:e.imageSignatureReceived,alt:"signature",className:"full-img-responsive"})})})})]}):null]})}):null,e.status===X.ACCEPTED?t.jsx(q,{variant:"outlined",color:"success",type:"button",onClick:_=>S(_,e),children:i===e.id?u("common.hide_details"):u("common.show_details")}):null]})]}),P(),x()]})}function it(){return t.jsx(t.Fragment,{children:[0,1,2,3].map(e=>t.jsx(b,{item:!0,xs:12,md:6,children:t.jsxs(ye,{sx:{display:{xs:"block",sm:"flex"},my:2},children:[t.jsx(_e,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:t.jsx(L,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:t.jsx("img",{src:U(k.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),t.jsx(je,{sx:{flex:1},children:t.jsx(b,{container:!0,spacing:2,children:t.jsxs(b,{item:!0,xs:12,children:[t.jsx(ue,{animation:"wave",height:24}),t.jsx(ue,{animation:"wave",height:24}),t.jsx(ue,{variant:"rectangular",width:"100%",height:100,sx:{my:3}})]})})})]},e)},e))})}export{jn as default};
