import{R as d,k as C,j as e,B as F,aj as P,ak as R,G as r,al as j,I as O,a3 as v,a4 as B,V as D,a as b,am as E,_ as L,r as A,h as f,a1 as T,a2 as G,L as M,d as W,o as w,P as q,v as U,z as $,a5 as S,a6 as N,an as V,af as H,ag as J}from"./index-cc58a329.js";import{d as z}from"./LockOutlined-ccfe3ff0.js";import{d as K}from"./Facebook-3f5bc5ed.js";import{d as Q}from"./Google-1d9a9d5d.js";import{B as X}from"./Breadcrumbs-27f8f572.js";import{C as Y}from"./Container-c6f384ce.js";import{i as Z,v as ee}from"./validation-signin-b85af5e9.js";import{F as _,I as y,O as I,a as k}from"./OutlinedInput-400299d2.js";import{I as se}from"./InputAdornment-cc5e3223.js";import{d as ae,a as re}from"./Visibility-191e6c26.js";import{C as ie}from"./Checkbox-f866ef39.js";const te=({onSubmit:c,loading:m})=>{const[o,g]=d.useState({showPassword:!1}),{t}=C(),n=()=>{g({showPassword:!o.showPassword})},u=i=>{i.preventDefault()};return e.jsx(F,{sx:{mt:1,pb:2},children:e.jsx(P,{initialValues:Z,validationSchema:ee,onSubmit:i=>c(i),children:({values:i,setFieldValue:h})=>e.jsx(R,{children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(j,{name:"email",children:({field:l,form:{touched:x,errors:a},meta:s})=>e.jsxs(_,{fullWidth:!0,error:s.touched&&!!s.error,children:[e.jsx(y,{htmlFor:"email",children:t("common.label_email")}),e.jsx(I,{id:"email",name:"email",color:"secondary",type:"email",label:t("common.label_email"),"aria-describedby":"email-helper-text",...l,inputProps:{"data-testid":"email"}}),s.touched&&s.error&&e.jsx(k,{id:"email-helper-text","data-testid":"email-helper-text",children:s.error})]})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(j,{name:"password",children:({field:l,form:{touched:x,errors:a},meta:s})=>e.jsxs(_,{fullWidth:!0,error:s.touched&&!!s.error,children:[e.jsx(y,{htmlFor:"password",children:t("common.label_password")}),e.jsx(I,{id:"password",name:"password",color:"secondary",type:o.showPassword?"text":"password",label:t("common.label_password"),"aria-describedby":"password-helper-text",...l,inputProps:{"data-testid":"password"},endAdornment:e.jsx(se,{position:"end",children:e.jsx(O,{"aria-label":"toggle password visibility",onClick:n,onMouseDown:u,edge:"end",children:o.showPassword?e.jsx(ae,{}):e.jsx(re,{})})})}),s.touched&&s.error&&e.jsx(k,{id:"password-helper-text","data-testid":"password-helper-text",children:s.error})]})})}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(v,{checked:i.rememberMe,onChange:()=>h("rememberMe",!i.rememberMe),control:e.jsx(ie,{color:"secondary"}),label:t("signin.label_remember_me")}),e.jsx(B,{fullWidth:!0,variant:"contained",color:"secondary",type:"submit","data-testid":"submit",sx:{mt:3,mb:2},loading:m,children:t("signin.label_login")})]})]})})})})};function je(){const[c,m]=d.useState(!1);d.useState({showPassword:!1});const[o,g]=d.useState(!0),{t}=C(),n=D(),{loading:u}=b(E),{oneSignalId:i}=b(L);d.useEffect(()=>{m(!0)},[]);const h=a=>{n(V({email:a.email.toString(),password:a.password.toString(),oneSignalId:i,rememberMe:o}))},l=a=>{if(a!=null&&a.credential){const s=JSON.parse(H(a.credential)),p={Ba:"",tokenId:a.credential,googleId:a.clientId,profileObj:{email:s.email,familyName:s.family_name,givenName:s.given_name,imageUrl:s.picture,name:s.name},idOneSignal:i,sourceConnectedDevice:f.GOOGLE_PLUS};n(J({...p}))}},x=A.useCallback(()=>{FB.login(a=>{a.status==="connected"&&FB.api("/me",{fields:"id,name,email,picture"},s=>{const p={accessToken:a.authResponse.accessToken,data_access_expiration_time:a.authResponse.data_access_expiration_time,graphDomain:a.authResponse.graphDomain,signedRequest:a.authResponse.signedRequest,email:s.email,id:s.id,name:s.name,picture:s.picture,userID:a.authResponse.userID,sourceConnectedDevice:f.FACEBOOK,idOneSignal:i};n(T({...p}))})},{scope:"public_profile, email"})},[]);return e.jsx(G,{direction:"up",in:c,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(Y,{maxWidth:"xl",children:[e.jsxs(r,{container:!0,style:{paddingTop:10},children:[e.jsx(r,{item:!0,sm:4}),e.jsx(r,{item:!0,xs:12,sm:6,children:e.jsxs(X,{"aria-label":"breadcrumb",children:[e.jsx(M,{color:"inherit",to:W.HOME,children:"SRF"}),e.jsx(w,{color:"text.primary",children:t("signin.title_page_signin")})]})})]}),e.jsxs(r,{container:!0,sx:{pt:5,pb:5},children:[e.jsx(r,{item:!0,xs:4}),e.jsxs(r,{item:!0,xs:12,sm:8,md:4,component:q,"md-offset":3,elevation:6,square:!0,children:[e.jsxs(F,{sx:{my:4,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(U,{sx:{m:1,bgcolor:"secondary.main"},children:e.jsx(z,{})}),e.jsx(w,{component:"h1",variant:"h5",children:t("signin.title_page_signin")}),e.jsx(te,{onSubmit:h,loading:u})]}),e.jsxs($,{spacing:2,direction:"row",sx:{justifyContent:"center",my:4},"data-testid":"signin-social-media",children:[e.jsx(S,{color:"primary","aria-label":"add",onClick:x,children:e.jsx(K,{})}),e.jsxs(S,{color:"secondary","aria-label":"google",sx:{m:1,backgroundColor:"#E93F2E"},children:[e.jsx(N,{isOneTap:!1,handleCredentialResponse:l}),e.jsx(Q,{})]})]})]}),e.jsx(r,{item:!0,xs:4})]})]})})}export{je as default};
