import{r as v,aP as Z,aQ as J,y as w,aR as f,aS as K,aT as X,j as e,aU as W,aV as ee,d2 as Pe,dB as Ge,bR as Re,k as te,V as Oe,B as b,o as S,G as c,ac as U,n as q,A as $,R as M,u as Ae,m as He,v as Qe,E as Ye,F as ge,dC as Ze,d as Y,a7 as Te,ad as Fe,a8 as De,a9 as we,ae as Ee,ab as ke,N as ce,O as V,ao as Je,ap as Ke,a as D,ca as Xe,c as et,$ as ze,aK as tt,L as $e,a4 as Ce,a3 as re,dD as st,dE as ot,q as at,s as Se,w as ye,P as rt,dF as nt,dG as lt,dH as it,dI as dt,dJ as ct,dK as ut,dL as pt,dM as mt,dN as Le,dO as Ne,dP as ne,cC as _e,cB as xt,dQ as ht,dR as ft,dS as bt}from"./index-cc58a329.js";import{B as vt}from"./Breadcrumbs-27f8f572.js";import{C as jt}from"./Container-c6f384ce.js";import{A as Ue}from"./Alert-a2f3ba94.js";import{C as Be,a as ue}from"./CardContent-0d1848fb.js";import{C as qe,b as gt}from"./index-b8b6ccd5.js";import{d as Ct}from"./Delete-238cbf2a.js";import{S as le}from"./Skeleton-861e561d.js";import{I as St}from"./InputQuantity-21944e61.js";import{C as yt}from"./CardHeader-ccefbe75.js";import{I as Lt}from"./InfiniteScroll-321153e4.js";import{C as Nt}from"./react-time-ago-5fee5104.js";import{F as k,I as H,O as Q,a as z,b as _t}from"./OutlinedInput-400299d2.js";import{A as Mt,L as It}from"./Autocomplete-d4d8b663.js";import{T as Pt}from"./TextField-727dca04.js";import{R as Rt,a as Me}from"./RadioGroup-5cd949cc.js";import{C as Ot}from"./Checkbox-f866ef39.js";import"./Close-751101d2.js";import"./index-a79bf066.js";import"./Chip-202c59ef.js";const At=v.createContext({}),ae=At,Tt=v.createContext({}),pe=Tt;function Ft(t){return Z("MuiStep",t)}J("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Dt=["active","children","className","component","completed","disabled","expanded","index","last"],wt=t=>{const{classes:s,orientation:a,alternativeLabel:n,completed:o}=t;return ee({root:["root",a,n&&"alternativeLabel",o&&"completed"]},Ft,s)},Et=w("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.orientation],a.alternativeLabel&&s.alternativeLabel,a.completed&&s.completed]}})(({ownerState:t})=>f({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),kt=v.forwardRef(function(s,a){const n=K({props:s,name:"MuiStep"}),{active:o,children:r,className:i,component:l="div",completed:m,disabled:h,expanded:u=!1,index:d,last:x}=n,N=X(n,Dt),{activeStep:j,connector:p,alternativeLabel:I,orientation:P,nonLinear:R}=v.useContext(ae);let[g=!1,O=!1,y=!1]=[o,m,h];j===d?g=o!==void 0?o:!0:!R&&j>d?O=m!==void 0?m:!0:!R&&j<d&&(y=h!==void 0?h:!0);const A=v.useMemo(()=>({index:d,last:x,expanded:u,icon:d+1,active:g,completed:O,disabled:y}),[d,x,u,g,O,y]),_=f({},n,{active:g,orientation:P,alternativeLabel:I,completed:O,disabled:y,expanded:u,component:l}),T=wt(_),F=e.jsxs(Et,f({as:l,className:W(T.root,i),ref:a,ownerState:_},N,{children:[p&&I&&d!==0?p:null,r]}));return e.jsx(pe.Provider,{value:A,children:p&&!I&&d!==0?e.jsxs(v.Fragment,{children:[p,F]}):F})}),zt=kt,$t=Pe(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ut=Pe(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Bt(t){return Z("MuiStepIcon",t)}const qt=J("MuiStepIcon",["root","active","completed","error","text"]),ie=qt;var Ie;const Vt=["active","className","completed","error","icon"],Wt=t=>{const{classes:s,active:a,completed:n,error:o}=t;return ee({root:["root",a&&"active",n&&"completed",o&&"error"],text:["text"]},Bt,s)},de=w(Ge,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${ie.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${ie.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${ie.error}`]:{color:(t.vars||t).palette.error.main}})),Gt=w("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,s)=>s.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),Ht=v.forwardRef(function(s,a){const n=K({props:s,name:"MuiStepIcon"}),{active:o=!1,className:r,completed:i=!1,error:l=!1,icon:m}=n,h=X(n,Vt),u=f({},n,{active:o,completed:i,error:l}),d=Wt(u);if(typeof m=="number"||typeof m=="string"){const x=W(r,d.root);return l?e.jsx(de,f({as:Ut,className:x,ref:a,ownerState:u},h)):i?e.jsx(de,f({as:$t,className:x,ref:a,ownerState:u},h)):e.jsxs(de,f({className:x,ref:a,ownerState:u},h,{children:[Ie||(Ie=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(Gt,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:m})]}))}return m}),Qt=Ht;function Yt(t){return Z("MuiStepLabel",t)}const Zt=J("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),E=Zt,Jt=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Kt=t=>{const{classes:s,orientation:a,active:n,completed:o,error:r,disabled:i,alternativeLabel:l}=t;return ee({root:["root",a,r&&"error",i&&"disabled",l&&"alternativeLabel"],label:["label",n&&"active",o&&"completed",r&&"error",i&&"disabled",l&&"alternativeLabel"],iconContainer:["iconContainer",n&&"active",o&&"completed",r&&"error",i&&"disabled",l&&"alternativeLabel"],labelContainer:["labelContainer",l&&"alternativeLabel"]},Yt,s)},Xt=w("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.orientation]]}})(({ownerState:t})=>f({display:"flex",alignItems:"center",[`&.${E.alternativeLabel}`]:{flexDirection:"column"},[`&.${E.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),es=w("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,s)=>s.label})(({theme:t})=>f({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${E.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${E.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${E.alternativeLabel}`]:{marginTop:16},[`&.${E.error}`]:{color:(t.vars||t).palette.error.main}})),ts=w("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,s)=>s.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${E.alternativeLabel}`]:{paddingRight:0}})),ss=w("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,s)=>s.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${E.alternativeLabel}`]:{textAlign:"center"}})),Ve=v.forwardRef(function(s,a){var n;const o=K({props:s,name:"MuiStepLabel"}),{children:r,className:i,componentsProps:l={},error:m=!1,icon:h,optional:u,slotProps:d={},StepIconComponent:x,StepIconProps:N}=o,j=X(o,Jt),{alternativeLabel:p,orientation:I}=v.useContext(ae),{active:P,disabled:R,completed:g,icon:O}=v.useContext(pe),y=h||O;let A=x;y&&!A&&(A=Qt);const _=f({},o,{active:P,alternativeLabel:p,completed:g,disabled:R,error:m,orientation:I}),T=Kt(_),F=(n=d.label)!=null?n:l.label;return e.jsxs(Xt,f({className:W(T.root,i),ref:a,ownerState:_},j,{children:[y||A?e.jsx(ts,{className:T.iconContainer,ownerState:_,children:e.jsx(A,f({completed:g,active:P,error:m,icon:y},N))}):null,e.jsxs(ss,{className:T.labelContainer,ownerState:_,children:[r?e.jsx(es,f({ownerState:_},F,{className:W(T.label,F==null?void 0:F.className),children:r})):null,u]})]}))});Ve.muiName="StepLabel";const os=Ve;function as(t){return Z("MuiStepConnector",t)}J("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const rs=["className"],ns=t=>{const{classes:s,orientation:a,alternativeLabel:n,active:o,completed:r,disabled:i}=t,l={root:["root",a,n&&"alternativeLabel",o&&"active",r&&"completed",i&&"disabled"],line:["line",`line${Re(a)}`]};return ee(l,as,s)},ls=w("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.orientation],a.alternativeLabel&&s.alternativeLabel,a.completed&&s.completed]}})(({ownerState:t})=>f({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),is=w("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.line,s[`line${Re(a.orientation)}`]]}})(({ownerState:t,theme:s})=>{const a=s.palette.mode==="light"?s.palette.grey[400]:s.palette.grey[600];return f({display:"block",borderColor:s.vars?s.vars.palette.StepConnector.border:a},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),ds=v.forwardRef(function(s,a){const n=K({props:s,name:"MuiStepConnector"}),{className:o}=n,r=X(n,rs),{alternativeLabel:i,orientation:l="horizontal"}=v.useContext(ae),{active:m,disabled:h,completed:u}=v.useContext(pe),d=f({},n,{alternativeLabel:i,orientation:l,active:m,completed:u,disabled:h}),x=ns(d);return e.jsx(ls,f({className:W(x.root,o),ref:a,ownerState:d},r,{children:e.jsx(is,{className:x.line,ownerState:d})}))}),cs=ds;function us(t){return Z("MuiStepper",t)}J("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const ps=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],ms=t=>{const{orientation:s,alternativeLabel:a,classes:n}=t;return ee({root:["root",s,a&&"alternativeLabel"]},us,n)},xs=w("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.orientation],a.alternativeLabel&&s.alternativeLabel]}})(({ownerState:t})=>f({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),hs=e.jsx(cs,{}),fs=v.forwardRef(function(s,a){const n=K({props:s,name:"MuiStepper"}),{activeStep:o=0,alternativeLabel:r=!1,children:i,className:l,component:m="div",connector:h=hs,nonLinear:u=!1,orientation:d="horizontal"}=n,x=X(n,ps),N=f({},n,{alternativeLabel:r,orientation:d,component:m}),j=ms(N),p=v.Children.toArray(i).filter(Boolean),I=p.map((R,g)=>v.cloneElement(R,f({index:g,last:g+1===p.length},R.props))),P=v.useMemo(()=>({activeStep:o,alternativeLabel:r,connector:h,nonLinear:u,orientation:d}),[o,r,h,u,d]);return e.jsx(ae.Provider,{value:P,children:e.jsx(xs,f({as:m,ownerState:N,className:W(j.root,l),ref:a},x,{children:I}))})}),bs=fs;function vs(){return e.jsx(b,{children:[0,1,2].map(t=>e.jsxs(Be,{sx:{display:{xs:"block",sm:"flex"},my:2},children:[e.jsx(qe,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:e.jsx(b,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:e.jsx("img",{src:q($.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),e.jsx(ue,{sx:{flex:1},children:e.jsx(c,{container:!0,spacing:2,children:e.jsxs(c,{item:!0,xs:12,children:[e.jsx(le,{animation:"wave",height:24}),e.jsx(le,{animation:"wave",height:24}),e.jsx(le,{variant:"rectangular",width:"100%",height:100,sx:{my:3}})]})})})]},t))})}function js({cart:t,t:s,parentCallbackDeleteCart:a,parentCallbackUpdateQuantity:n}){var I,P,R,g,O,y,A,_,T,F,L,G,se,oe,xe,he,fe,be,ve;const[o,r]=M.useState(!1),[i,l]=M.useState(-1),m=Ae(),h=()=>{setTimeout(()=>{var C;m(Y.DETAILS_OFFER+"/"+((C=t==null?void 0:t.sellOffer)==null?void 0:C.id))},300)},u=C=>{const B={...t,quantity:C};n(B)},d=()=>{r(!1)},x=()=>{r(!1),a(i)},N=C=>{C.stopPropagation(),l(t==null?void 0:t.id),r(!0)},j=(C,B)=>{C.stopPropagation(),setTimeout(()=>{m(Y.PROFILE+"/"+B)},300)},p=()=>e.jsxs(Te,{open:o,TransitionComponent:Fe,keepMounted:!0,onClose:d,"aria-describedby":"alert-dialog-slide-description",children:[e.jsx(De,{children:s("cart.title_dialog_delete_cart")}),e.jsx(we,{children:e.jsx(Ee,{id:"alert-dialog-slide-description",children:s("cart.description_dialog_delete_cart")})}),e.jsxs(ke,{children:[e.jsx(U,{onClick:d,color:"neutral",children:s("common.label_cancel")}),e.jsx(U,{onClick:x,color:"error",children:s("common.label_delete")})]})]});return e.jsxs(b,{children:[e.jsxs(Be,{sx:{display:{xs:"block",sm:"flex"}},onClick:()=>h(),children:[e.jsx(qe,{sx:{width:{xs:"100%",sm:250},height:{xs:"100%",sm:200}},children:(P=(I=t==null?void 0:t.sellOffer)==null?void 0:I.offerImages)!=null&&P.length?e.jsx(gt.LazyLoadImage,{alt:"Image offer",src:He((R=t==null?void 0:t.sellOffer)==null?void 0:R.id,(g=t==null?void 0:t.sellOffer)==null?void 0:g.offerImages[0].path),placeholder:e.jsx("img",{src:q($.DEFAULT_LAZY_IMAGE_LOADING),className:"img-lazy-loading",alt:"image srfgroup"}),placeholderSrc:q($.DEFAULT_LAZY_IMAGE_LOADING),onError:C=>{C.target.onerror=null,C.target.src=q($.DEFAULT_LAZY_IMAGE)},className:"img-lazy-loading"}):e.jsx(b,{sx:{display:{xs:"none",md:"block"},height:"100%"},children:e.jsx("img",{src:q($.DEFAULT_LAZY_IMAGE),className:"img-lazy-loading",alt:"image not found"})})}),e.jsxs(ue,{sx:{flex:1},children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:8,children:e.jsx(yt,{sx:{pl:0,pt:0},avatar:e.jsx(Qe,{role:"img","aria-label":"Image avatar",src:Ye((y=(O=t==null?void 0:t.sellOffer)==null?void 0:O.user)==null?void 0:y.id,(_=(A=t==null?void 0:t.sellOffer)==null?void 0:A.user)==null?void 0:_.imageUrl,(F=(T=t==null?void 0:t.sellOffer)==null?void 0:T.user)==null?void 0:F.sourceConnectedDevice),alt:"image not found",onClick:C=>{var B,je;return j(C,(je=(B=t==null?void 0:t.sellOffer)==null?void 0:B.user)==null?void 0:je.id)},children:(G=ge((L=t==null?void 0:t.sellOffer)==null?void 0:L.user))==null?void 0:G.charAt(0)}),title:ge((se=t==null?void 0:t.sellOffer)==null?void 0:se.user),subheader:e.jsx(M.Fragment,{children:e.jsx(S,{children:e.jsx(Nt,{convertDate:t==null?void 0:t.passedDate})})})})}),(oe=t==null?void 0:t.sellOffer)!=null&&oe.amount?e.jsx(c,{item:!0,xs:4,children:e.jsxs(S,{variant:"subtitle1",color:"secondary",display:"flex",sx:{justifyContent:"end"},children:[(xe=t==null?void 0:t.total)==null?void 0:xe.toLocaleString("tn-TN")," TND"]})}):null]}),e.jsxs(ue,{children:[e.jsx(S,{children:(he=t==null?void 0:t.sellOffer)==null?void 0:he.title}),e.jsxs(S,{variant:"body2",color:"text.secondary",children:["Montant ",(be=(fe=t==null?void 0:t.sellOffer)==null?void 0:fe.amount)==null?void 0:be.toLocaleString("tn-TN")," TND"]}),e.jsxs(S,{variant:"body2",color:"text.secondary",children:["Quantité ",t==null?void 0:t.quantity]}),e.jsxs(S,{variant:"body2",color:"text.secondary",children:["Frais de livraison ",(ve=t==null?void 0:t.sellOffer)==null?void 0:ve.shippingCost," TND"]})]}),e.jsxs(b,{sx:{my:1},children:[e.jsx(b,{sx:{float:"left"},children:e.jsx(St,{parentCallChangeQuantity:u,defaultValue:t==null?void 0:t.quantity})}),e.jsx(U,{color:"error",variant:"outlined",startIcon:e.jsx(Ct,{}),sx:{ml:"auto",float:"right"},size:"small",onClick:C=>N(C),children:s("common.label_delete")}),e.jsx(b,{style:{clear:"both"}})]})]})]}),p()]})}function gs({entitiesCart:t,loadingEntitiesCart:s,nextStepHandler:a,totalPagesCart:n,loadMoreCartCallback:o,activePageCart:r,deleteDetailsCartCallback:i}){const{t:l}=te(),m=Oe(),h=x=>{i(x)},u=x=>{m(Ze({...x}))},d=()=>{a()};return e.jsxs(b,{sx:{pt:3},children:[e.jsx(S,{variant:"h4",color:"text.secondary",children:"Liste des produits"}),e.jsxs(b,{children:[e.jsxs(Lt,{pageStart:r,loadMore:o,hasMore:n-1>r,loader:e.jsx("div",{className:"loader"},0),threshold:0,initialLoad:!1,children:[t.map((x,N)=>e.jsx(b,{sx:{my:2},children:e.jsx(js,{cart:x,t:l,parentCallbackDeleteCart:h,parentCallbackUpdateQuantity:u})},`index-${N}`)),s?e.jsx(vs,{}):null]}),!s&&(t==null?void 0:t.length)==0?e.jsx(c,{item:!0,xs:12,md:6,children:e.jsx(Ue,{severity:"warning",children:l("order.no_commandes_founds")})}):null,e.jsx(U,{variant:"contained",color:"secondary",fullWidth:!0,onClick:d,children:l("cart.label_validate_order")})]})]})}const Cs={email:"",firstName:"",lastName:"",phone:"",address:null},Ss=ce({email:V().required("Email is required"),firstName:V().required("firstName is required"),lastName:V().required("lastName is required"),phone:V().nullable().required("Phone is required"),address:ce().nullable().required("Address is required")}),ys={code:"",paymentMode:""},Ls=ce({code:V().nullable().notRequired(),paymentMode:V().required("Payment mode is required")});var me={},Ns=Ke;Object.defineProperty(me,"__esModule",{value:!0});var We=me.default=void 0,_s=Ns(Je()),Ms=e,Is=(0,_s.default)((0,Ms.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");We=me.default=Is;const Ps=Cs;function Rs({submitHandler:t}){const{t:s}=te(),a=D(Xe),n=D(et).entities??[],o=ze({initialValues:Ps,validationSchema:Ss,onSubmit:r=>{t(r)}});return M.useEffect(()=>{a&&(o.setFieldValue("firstName",a.firstName),o.setFieldValue("lastName",a.lastName),o.setFieldValue("email",a.email),o.setFieldValue("address",a.address),o.setFieldValue("phone",a.phone))},[a]),e.jsxs(b,{sx:{pt:3},children:[e.jsx(S,{variant:"h4",color:"text.secondary",children:"Détails de facturation"}),e.jsxs("form",{onSubmit:o.handleSubmit,children:[e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:o.touched.firstName&&!!o.errors.firstName,size:"small",children:[e.jsxs(H,{htmlFor:"outlined-adornment-title",children:[s("account.label_firstname")," *"]}),e.jsx(Q,{id:"firstName",name:"firstName",label:s("account.label_firstname"),value:o.values.firstName,onChange:o.handleChange,disabled:!0}),e.jsx(z,{id:"component-helper-text",children:o.touched.firstName&&o.errors.firstName})]})}),e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:o.touched.lastName&&!!o.errors.lastName,size:"small",children:[e.jsxs(H,{htmlFor:"outlined-adornment-title",children:[s("account.label_lastname")," *"]}),e.jsx(Q,{id:"lastName",name:"lastName",label:s("account.label_lastname"),value:o.values.lastName,onChange:o.handleChange,disabled:!0}),e.jsx(z,{id:"component-helper-text",children:o.touched.lastName&&o.errors.lastName})]})})]}),e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:o.touched.email&&!!o.errors.email,size:"small",children:[e.jsx(H,{htmlFor:"outlined-adornment-title",children:s("account.label_email")}),e.jsx(Q,{id:"email",name:"email",label:s("account.label_email"),value:o.values.email,onChange:o.handleChange,disabled:!0}),e.jsx(z,{id:"component-helper-text",children:o.touched.email&&o.errors.email})]})}),e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:o.touched.address&&!!o.errors.address,children:[e.jsx(Mt,{id:"address",fullWidth:!0,size:"small",disabled:!0,options:n,value:o.values.address,onChange:(r,i)=>o.setFieldValue("address",i||null),autoHighlight:!0,getOptionLabel:r=>(r==null?void 0:r.city)||"",renderOption:(r,i)=>e.jsx(b,{component:"li",...r,children:i==null?void 0:i.city}),renderInput:r=>e.jsx(Pt,{...r,label:"Address",inputProps:{...r.inputProps,form:{autocomplete:"off"},autoComplete:"off"}})}),e.jsx(z,{id:"component-helper-text",children:o.touched.address&&o.errors.address})]})})]}),e.jsxs(c,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:o.touched.phone&&!!o.errors.phone,size:"small",children:[e.jsxs(H,{htmlFor:"outlined-adornment-title",children:[s("account.label_phone")," *"]}),e.jsx(Q,{id:"phone",name:"phone",label:s("account.label_phone"),type:"tel",value:o.values.phone||"",onChange:o.handleChange,disabled:!0}),e.jsx(z,{id:"component-helper-text",children:o.touched.phone&&o.errors.phone})]})}),e.jsx(c,{item:!0,xs:12,md:6})]}),o.touched.firstName&&o.errors.firstName||o.touched.lastName&&o.errors.lastName||o.touched.phone&&o.errors.phone||o.touched.address&&o.errors.address?e.jsxs(b,{sx:{mt:2},children:[e.jsx(tt,{}),e.jsx(S,{variant:"h6",color:"error",children:s("cart.missing_account_informations")}),e.jsxs($e,{color:"inherit",to:Y.ACCOUNT,children:[e.jsx(We,{})," Mon compte"]})]}):null,e.jsx(U,{sx:{mt:1},variant:"contained",color:"secondary",fullWidth:!0,type:"submit",children:s("cart.label_confirm_order")})]})]})}const Os=ys;function As({callbackAddOrder:t,loadingOrder:s}){const{t:a}=te(),[n,o]=M.useState(""),r=ze({initialValues:Os,validationSchema:Ls,onSubmit:l=>{t(l)}}),i=l=>{o(l.target.value),r.setFieldValue("paymentMode","cash")};return e.jsxs(b,{sx:{pt:3},children:[e.jsx(S,{variant:"h4",color:"text.secondary",sx:{mb:3},children:"Passer la commande"}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsx(S,{variant:"subtitle2",color:"text.secondary",children:"Si vous possédez un code promo, veuillez l’appliquer ci-dessous."}),e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(k,{fullWidth:!0,error:r.touched.code&&!!r.errors.code,children:[e.jsx(H,{htmlFor:"outlined-adornment-title",children:a("cart.label_code")}),e.jsx(Q,{id:"code",name:"code",color:"secondary",size:"small",label:a("cart.label_code"),value:r.values.code,onChange:r.handleChange}),e.jsx(z,{id:"component-helper-text",children:r.touched.code&&r.errors.code})]})}),e.jsx(c,{item:!0,xs:12,md:6,sx:{pt:0},children:e.jsx(Ce,{fullWidth:!0,variant:"contained",color:"secondary",type:"button","data-testid":"submit",sx:{mt:.5},children:"Appliquer le code promo"})})]}),e.jsxs(k,{sx:{m:3},error:r.touched.paymentMode&&!!r.errors.paymentMode,variant:"standard",children:[e.jsx(_t,{id:"demo-error-radios",children:"MODE DE PAIEMENT"}),e.jsxs(Rt,{"aria-labelledby":"demo-error-radios",name:"quiz",value:n,onChange:i,children:[e.jsx(re,{value:"best",control:e.jsx(Me,{disabled:!0,color:"secondary"}),label:"Paiement par carte Bancaire"}),e.jsx(re,{value:"cash",control:e.jsx(Me,{color:"secondary"}),label:"Espèces à la livraison"})]}),e.jsx(z,{color:"error",children:r.touched.paymentMode&&r.errors.paymentMode?a("cart.select_your_mode_payment"):""})]}),e.jsx(st,{children:e.jsx(re,{control:e.jsx(Ot,{defaultChecked:!0,color:"secondary"}),label:"J’ai lu et j’accepte les conditions générales *"})}),e.jsx(Ce,{loading:s,variant:"contained",color:"secondary",fullWidth:!0,type:"submit",children:a("cart.label_pass_order")})]})]})}function Ts({activeStep:t,submitHandler:s}){var n,o;te();const a=D(ot)??{};return e.jsxs(b,{children:[e.jsxs(at,{sx:{width:"100%",bgcolor:"background.paper"},subheader:e.jsx(It,{children:"Details Panier"}),children:[(n=a==null?void 0:a.detailsCartGlobal)==null?void 0:n.map((r,i)=>{var l;return e.jsxs(Se,{children:[e.jsx(ye,{id:"switch-list-label-wifi",primary:`${r==null?void 0:r.numberOfProducts} produits`}),e.jsxs(S,{variant:"subtitle2",color:"text.secondary",children:[(l=r==null?void 0:r.totalCarts)==null?void 0:l.toLocaleString("tn-TN")," TND"]})]},i)}),e.jsxs(Se,{children:[e.jsx(ye,{id:"switch-list-label-wifi",primary:"Total TTC"}),e.jsxs(S,{variant:"subtitle2",color:"text.secondary",children:[(o=a==null?void 0:a.totalGlobalCarts)==null?void 0:o.toLocaleString("tn-TN")," TND"]})]})]}),e.jsx(rt,{elevation:0,sx:{mt:2},children:e.jsx("img",{src:q("/assets/images/logo-svg.svg"),className:"full-img-responsive",alt:"Logo SrfGroup",loading:"lazy"})})]})}const Fs=["Valider la commande","Confirmer la commande","Passer la commande"];function to(){const[t,s]=M.useState(!0),[a,n]=M.useState(0),[o,r]=M.useState(!1),i=D(nt)??!1,l=D(lt)??[],m=D(it)??0,h=D(dt)??!1,u=D(ct)??-1,d=D(ut)??!1,x=D(pt)??!1,N=D(mt)??!1,{t:j}=te(),p=Oe(),I=Ae(),P=()=>{p(xt({})),p(ne(0))};M.useEffect(()=>{t&&l.length===0&&(s(!1),P(),p(Le({})))},[t]),M.useEffect(()=>{u>=0&&!t&&p(Ne({page:u,size:$.ORDERS_PER_PAGE,queryParams:""}))},[u,t]),M.useEffect(()=>{(h||N)&&(p(ne(0)),P(),p(Ne({page:0,size:$.ORDERS_PER_PAGE,queryParams:""})),p(_e({})),p(Le({})))},[h,N]);const R=()=>{s(!1),p(ne(u+1))},g=()=>{n(L=>L+1)},O=()=>{n(L=>L-1)},y=L=>{n(G=>G+1)},A=L=>{p(ht({...L}))};M.useEffect(()=>{x&&(p(_e({})),r(!0))},[x]);const _=()=>{p(bt({})),r(!1),I(Y.ORDER.LIST)},T=L=>{p(ft({id:L}))},F=()=>e.jsxs(Te,{open:o,TransitionComponent:Fe,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsx(De,{children:j("order.title_dialog_add_order")}),e.jsx(we,{children:e.jsx(Ee,{id:"alert-dialog-slide-description",children:j("order.description_dialog_add_order")})}),e.jsx(ke,{children:e.jsx(U,{color:"success",onClick:_,children:"Ok"})})]});return e.jsxs(jt,{maxWidth:"xl",children:[e.jsx(c,{container:!0,style:{paddingTop:10},children:e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(vt,{"aria-label":"breadcrumb",children:[e.jsx($e,{color:"inherit",to:Y.HOME,children:"SRF"}),e.jsx(S,{color:"text.primary",children:j("header.label_cart")})]})})}),l.length===0&&!i?e.jsxs(c,{container:!0,spacing:4,sx:{mt:3},children:[e.jsx(c,{item:!0,xs:12,md:1}),e.jsx(c,{item:!0,xs:12,md:6,children:e.jsx(Ue,{severity:"error",children:j("cart.list_not_found")})})]}):e.jsxs(c,{container:!0,spacing:4,sx:{mt:3},children:[e.jsx(c,{item:!0,xs:12,md:1}),e.jsx(c,{item:!0,xs:12,md:6,children:e.jsxs(b,{children:[e.jsx(bs,{activeStep:a,children:Fs.map((L,G)=>{const se={},oe={};return e.jsx(zt,{...se,children:e.jsx(os,{...oe,children:L})},L)})}),a===0?e.jsx(gs,{nextStepHandler:g,entitiesCart:l,loadingEntitiesCart:i,totalPagesCart:m,loadMoreCartCallback:R,activePageCart:u,deleteDetailsCartCallback:T}):a===1?e.jsx(Rs,{submitHandler:y}):e.jsx(As,{callbackAddOrder:A,loadingOrder:d}),e.jsx(M.Fragment,{children:e.jsx(b,{sx:{display:"flex",flexDirection:"row",pt:2},children:e.jsx(U,{variant:"contained",color:"neutral",disabled:a===0,onClick:O,sx:{mr:1},children:j("cart.label_back_order")})})})]})}),e.jsxs(c,{item:!0,xs:12,md:4,children:[e.jsx(S,{variant:"h4",color:"text.secondary",children:"Votre commande"}),e.jsx(Ts,{activeStep:a,submitHandler:y})]})]}),F()]})}export{to as default};
